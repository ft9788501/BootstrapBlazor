var Speech=function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=100)}([function(e,t,i){"use strict";var r;i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return s})),function(e){e[e.PCM=1]="PCM",e[e.MuLaw=2]="MuLaw",e[e.Siren=3]="Siren",e[e.MP3=4]="MP3",e[e.SILKSkype=5]="SILKSkype",e[e.OGG_OPUS=6]="OGG_OPUS",e[e.WEBM_OPUS=7]="WEBM_OPUS",e[e.ALaw=8]="ALaw",e[e.FLAC=9]="FLAC",e[e.OPUS=10]="OPUS"}(r||(r={}));class n{static getDefaultInputFormat(){return s.getDefaultInputFormat()}static getWaveFormat(e,t,i,r){return new s(e,t,i,r)}static getWaveFormatPCM(e,t,i){return new s(e,t,i)}}class s extends n{constructor(e=16e3,t=16,i=1,n=r.PCM){super(),this.setString=(e,t,i)=>{for(let r=0;r<i.length;r++)e.setUint8(t+r,i.charCodeAt(r))};let s=!0;switch(n){case r.PCM:this.formatTag=1;break;case r.ALaw:this.formatTag=6;break;case r.MuLaw:this.formatTag=7;break;default:s=!1}if(this.bitsPerSample=t,this.samplesPerSec=e,this.channels=i,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),s){this.privHeader=new ArrayBuffer(44);const e=new DataView(this.privHeader);this.setString(e,0,"RIFF"),e.setUint32(4,0,!0),this.setString(e,8,"WAVEfmt "),e.setUint32(16,16,!0),e.setUint16(20,this.formatTag,!0),e.setUint16(22,this.channels,!0),e.setUint32(24,this.samplesPerSec,!0),e.setUint32(28,this.avgBytesPerSec,!0),e.setUint16(32,this.channels*(this.bitsPerSample/8),!0),e.setUint16(34,this.bitsPerSample,!0),this.setString(e,36,"data"),e.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new s}static getAudioContext(e){const t=window.AudioContext||window.webkitAudioContext||!1;if(t)return void 0!==e&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new t({sampleRate:e}):new t;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));class r{static throwIfNullOrUndefined(e,t){if(null==e)throw new Error("throwIfNullOrUndefined:"+t)}static throwIfNull(e,t){if(null===e)throw new Error("throwIfNull:"+t)}static throwIfNullOrWhitespace(e,t){if(r.throwIfNullOrUndefined(e,t),(""+e).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+t)}static throwIfDisposed(e){if(e)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(e,t){if(r.throwIfNullOrUndefined(e,t),0===e.length)throw new Error("throwIfArrayEmptyOrWhitespace:"+t);for(const i of e)r.throwIfNullOrWhitespace(i,t)}static throwIfFileDoesNotExist(e,t){r.throwIfNullOrWhitespace(e,t)}static throwIfNotUndefined(e,t){if(void 0!==e)throw new Error("throwIfNotUndefined:"+t)}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return s}));var r,n=i(12);!function(e){e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"}(r||(r={}));class s{constructor(e,t){this.privName=e,this.privEventId=Object(n.a)(),this.privEventTime=(new Date).toISOString(),this.privEventType=t,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}},function(e,t,i){"use strict";i.d(t,"OutputFormatPropertyName",(function(){return r})),i.d(t,"CancellationErrorCodePropertyName",(function(){return n})),i.d(t,"ServicePropertiesPropertyName",(function(){return s})),i.d(t,"ForceDictationPropertyName",(function(){return o})),i.d(t,"AutoDetectSourceLanguagesOpenRangeOptionName",(function(){return a}));const r="OutputFormat",n="CancellationErrorCode",s="ServiceProperties",o="ForceDictation",a="OpenRange"},function(e,t,i){"use strict";var r;i.d(t,"a",(function(){return r})),function(e){e[e.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",e[e.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",e[e.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",e[e.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",e[e.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",e[e.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",e[e.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",e[e.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",e[e.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",e[e.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",e[e.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",e[e.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",e[e.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",e[e.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",e[e.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",e[e.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",e[e.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",e[e.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",e[e.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",e[e.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",e[e.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",e[e.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",e[e.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",e[e.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",e[e.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",e[e.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",e[e.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",e[e.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",e[e.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",e[e.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",e[e.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",e[e.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",e[e.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus"}(r||(r={}))},function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return s}));class r extends Error{constructor(e){super(e),this.name="ArgumentNull",this.message=e}}class n extends Error{constructor(e){super(e),this.name="InvalidOperation",this.message=e}}class s extends Error{constructor(e,t){super(t),this.name=e+"ObjectDisposed",this.message=t}}},function(e,t,i){"use strict";var r;i.d(t,"a",(function(){return r})),function(e){e[e.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",e[e.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",e[e.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",e[e.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",e[e.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",e[e.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",e[e.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",e[e.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",e[e.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",e[e.SpeechServiceConnection_IntentRegion=9]="SpeechServiceConnection_IntentRegion",e[e.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",e[e.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",e[e.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",e[e.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",e[e.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",e[e.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",e[e.Speech_SessionId=16]="Speech_SessionId",e[e.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",e[e.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",e[e.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",e[e.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",e[e.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",e[e.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",e[e.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",e[e.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",e[e.CancellationDetails_Reason=25]="CancellationDetails_Reason",e[e.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",e[e.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",e[e.LanguageUnderstandingServiceResponse_JsonResult=28]="LanguageUnderstandingServiceResponse_JsonResult",e[e.SpeechServiceConnection_Url=29]="SpeechServiceConnection_Url",e[e.SpeechServiceConnection_InitialSilenceTimeoutMs=30]="SpeechServiceConnection_InitialSilenceTimeoutMs",e[e.SpeechServiceConnection_EndSilenceTimeoutMs=31]="SpeechServiceConnection_EndSilenceTimeoutMs",e[e.SpeechServiceConnection_EnableAudioLogging=32]="SpeechServiceConnection_EnableAudioLogging",e[e.SpeechServiceResponse_ProfanityOption=33]="SpeechServiceResponse_ProfanityOption",e[e.SpeechServiceResponse_PostProcessingOption=34]="SpeechServiceResponse_PostProcessingOption",e[e.SpeechServiceResponse_RequestWordLevelTimestamps=35]="SpeechServiceResponse_RequestWordLevelTimestamps",e[e.SpeechServiceResponse_StablePartialResultThreshold=36]="SpeechServiceResponse_StablePartialResultThreshold",e[e.SpeechServiceResponse_OutputFormatOption=37]="SpeechServiceResponse_OutputFormatOption",e[e.SpeechServiceResponse_TranslationRequestStablePartialResult=38]="SpeechServiceResponse_TranslationRequestStablePartialResult",e[e.Conversation_ApplicationId=39]="Conversation_ApplicationId",e[e.Conversation_DialogType=40]="Conversation_DialogType",e[e.Conversation_Initial_Silence_Timeout=41]="Conversation_Initial_Silence_Timeout",e[e.Conversation_From_Id=42]="Conversation_From_Id",e[e.Conversation_Conversation_Id=43]="Conversation_Conversation_Id",e[e.Conversation_Custom_Voice_Deployment_Ids=44]="Conversation_Custom_Voice_Deployment_Ids",e[e.Conversation_Speech_Activity_Template=45]="Conversation_Speech_Activity_Template",e[e.Conversation_Request_Bot_Status_Messages=46]="Conversation_Request_Bot_Status_Messages",e[e.Conversation_Agent_Connection_Id=47]="Conversation_Agent_Connection_Id",e[e.SpeechServiceConnection_Host=48]="SpeechServiceConnection_Host",e[e.ConversationTranslator_Host=49]="ConversationTranslator_Host",e[e.ConversationTranslator_Name=50]="ConversationTranslator_Name",e[e.ConversationTranslator_CorrelationId=51]="ConversationTranslator_CorrelationId",e[e.ConversationTranslator_Token=52]="ConversationTranslator_Token",e[e.PronunciationAssessment_ReferenceText=53]="PronunciationAssessment_ReferenceText",e[e.PronunciationAssessment_GradingSystem=54]="PronunciationAssessment_GradingSystem",e[e.PronunciationAssessment_Granularity=55]="PronunciationAssessment_Granularity",e[e.PronunciationAssessment_EnableMiscue=56]="PronunciationAssessment_EnableMiscue",e[e.PronunciationAssessment_Json=57]="PronunciationAssessment_Json",e[e.PronunciationAssessment_Params=58]="PronunciationAssessment_Params",e[e.SpeakerRecognition_Api_Version=59]="SpeakerRecognition_Api_Version"}(r||(r={}))},,,function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));class r{}r.AuthKey="Ocp-Apim-Subscription-Key",r.ConnectionId="X-ConnectionId",r.ContentType="Content-Type",r.CustomCommandsAppId="X-CommandsAppId",r.Path="Path",r.RequestId="X-RequestId",r.RequestStreamId="X-StreamId",r.RequestTimestamp="X-Timestamp"},function(e,t,i){"use strict";var r,n;i.d(t,"b",(function(){return r})),i.d(t,"a",(function(){return n})),function(e){e[e.Success=0]="Success",e[e.SynthesisEnd=1]="SynthesisEnd",e[e.Error=2]="Error"}(r||(r={})),function(e){e[e.Success=0]="Success",e[e.NoMatch=1]="NoMatch",e[e.InitialSilenceTimeout=2]="InitialSilenceTimeout",e[e.BabbleTimeout=3]="BabbleTimeout",e[e.Error=4]="Error",e[e.EndOfDictation=5]="EndOfDictation",e[e.TooManyRequests=6]="TooManyRequests",e[e.BadRequest=7]="BadRequest",e[e.Forbidden=8]="Forbidden"}(n||(n={}))},function(e,t,i){"use strict";i.d(t,"k",(function(){return s})),i.d(t,"e",(function(){return o})),i.d(t,"i",(function(){return a})),i.d(t,"h",(function(){return c})),i.d(t,"l",(function(){return h})),i.d(t,"j",(function(){return u})),i.d(t,"f",(function(){return p})),i.d(t,"n",(function(){return d})),i.d(t,"a",(function(){return v})),i.d(t,"b",(function(){return l})),i.d(t,"d",(function(){return f})),i.d(t,"o",(function(){return g})),i.d(t,"c",(function(){return S})),i.d(t,"m",(function(){return m})),i.d(t,"g",(function(){return y}));var r=i(2);class n extends r.b{constructor(e,t,i){super(e,t),this.privSignature=i}}class s extends n{constructor(e){super("OCSPMemoryCacheHitEvent",r.a.Debug,e)}}class o extends n{constructor(e){super("OCSPCacheMissEvent",r.a.Debug,e)}}class a extends n{constructor(e){super("OCSPDiskCacheHitEvent",r.a.Debug,e)}}class c extends n{constructor(e){super("OCSPCacheUpdateNeededEvent",r.a.Debug,e)}}class h extends n{constructor(e){super("OCSPMemoryCacheStoreEvent",r.a.Debug,e)}}class u extends n{constructor(e){super("OCSPDiskCacheStoreEvent",r.a.Debug,e)}}class p extends n{constructor(e){super("OCSPCacheUpdateCompleteEvent",r.a.Debug,e)}}class d extends n{constructor(){super("OCSPStapleReceivedEvent",r.a.Debug,"")}}class v extends n{constructor(e,t){super("OCSPCacheEntryExpiredEvent",r.a.Debug,e),this.privExpireTime=t}}class l extends n{constructor(e,t,i){super("OCSPCacheEntryNeedsRefreshEvent",r.a.Debug,e),this.privExpireTime=i,this.privStartTime=t}}class f extends n{constructor(e,t,i){super("OCSPCacheHitEvent",r.a.Debug,e),this.privExpireTime=i,this.privExpireTimeString=new Date(i).toLocaleDateString(),this.privStartTime=t,this.privStartTimeString=new Date(t).toLocaleTimeString()}}class g extends n{constructor(e,t){super("OCSPVerificationFailedEvent",r.a.Debug,e),this.privError=t}}class S extends n{constructor(e,t){super("OCSPCacheFetchErrorEvent",r.a.Debug,e),this.privError=t}}class m extends n{constructor(e){super("OCSPResponseRetrievedEvent",r.a.Debug,e)}}class y extends n{constructor(e,t){super("OCSPCacheUpdateErrorEvent",r.a.Debug,e),this.privError=t}}},function(e,t,i){"use strict";var r;i.d(t,"a",(function(){return d}));var n=new Uint8Array(16);function s(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(n)}var o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var a=function(e){return"string"==typeof e&&o.test(e)},c=[],h=0;h<256;++h)c.push((h+256).toString(16).substr(1));var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!a(i))throw TypeError("Stringified UUID is invalid");return i};var p=function(e,t,i){var r=(e=e||{}).random||(e.rng||s)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){i=i||0;for(var n=0;n<16;++n)t[i+n]=r[n];return t}return u(r)};const d=()=>p().replace(new RegExp("-","g"),"").toUpperCase()},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var r=i(14),n=i(5),s=i(9);class o extends r.a{constructor(e,t,i,r,o,a,c,h){if(!t)throw new n.a("path");if(!i)throw new n.a("requestId");const u={};if(u[s.a.Path]=t,u[s.a.RequestId]=i,u[s.a.RequestTimestamp]=(new Date).toISOString(),r&&(u[s.a.ContentType]=r),a&&(u[s.a.RequestStreamId]=a),c)for(const e in c)e&&(u[e]=c[e]);h?super(e,o,u,h):super(e,o,u),this.privPath=t,this.privRequestId=i,this.privContentType=r,this.privStreamId=a,this.privAdditionalHeaders=c}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}}o.fromConnectionMessage=e=>{let t=null,i=null,r=null,n=null,a=null;const c={};if(e.headers)for(const o in e.headers)o&&(o.toLowerCase()===s.a.Path.toLowerCase()?t=e.headers[o]:o.toLowerCase()===s.a.RequestId.toLowerCase()?i=e.headers[o]:o.toLowerCase()===s.a.RequestTimestamp.toLowerCase()?n=e.headers[o]:o.toLowerCase()===s.a.ContentType.toLowerCase()?r=e.headers[o]:o.toLowerCase()===s.a.RequestStreamId.toLowerCase()?a=e.headers[o]:c[o]=e.headers[o]);return new o(e.messageType,t,i,r,e.body,a,c,e.id)}},function(e,t,i){"use strict";i.d(t,"b",(function(){return r})),i.d(t,"a",(function(){return o}));var r,n=i(5),s=i(12);!function(e){e[e.Text=0]="Text",e[e.Binary=1]="Binary"}(r||(r={}));class o{constructor(e,t,i,o){if(this.privBody=null,e===r.Text&&t&&"string"!=typeof t)throw new n.b("Payload must be a string");if(e===r.Binary&&t&&!(t instanceof ArrayBuffer))throw new n.b("Payload must be ArrayBuffer");switch(this.privMessageType=e,this.privBody=t,this.privHeaders=i||{},this.privId=o||Object(s.a)(),this.messageType){case r.Binary:this.privSize=null!==this.binaryBody?this.binaryBody.byteLength:0;break;case r.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===r.Binary)throw new n.b("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===r.Text)throw new n.b("Not supported for text message");return this.privBody}get id(){return this.privId}}},function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"d",(function(){return o})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){return c})),i.d(t,"f",(function(){return u})),i.d(t,"e",(function(){return p})),i.d(t,"g",(function(){return d})),i.d(t,"h",(function(){return v}));var r=i(2);class n extends r.b{constructor(e,t,i=r.a.Info){super(e,i),this.privAudioSourceId=t}get audioSourceId(){return this.privAudioSourceId}}class s extends n{constructor(e){super("AudioSourceInitializingEvent",e)}}class o extends n{constructor(e){super("AudioSourceReadyEvent",e)}}class a extends n{constructor(e){super("AudioSourceOffEvent",e)}}class c extends n{constructor(e,t){super("AudioSourceErrorEvent",e,r.a.Error),this.privError=t}get error(){return this.privError}}class h extends n{constructor(e,t,i){super(e,t),this.privAudioNodeId=i}get audioNodeId(){return this.privAudioNodeId}}class u extends h{constructor(e,t){super("AudioStreamNodeAttachingEvent",e,t)}}class p extends h{constructor(e,t){super("AudioStreamNodeAttachedEvent",e,t)}}class d extends h{constructor(e,t){super("AudioStreamNodeDetachedEvent",e,t)}}class v extends h{constructor(e,t,i){super("AudioStreamNodeErrorEvent",e,t),this.privError=i}get error(){return this.privError}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));class r{}r.BotId="botid",r.CustomSpeechDeploymentId="cid",r.CustomVoiceDeploymentId="deploymentId",r.EnableAudioLogging="storeAudio",r.EnableLanguageId="lidEnabled",r.EnableWordLevelTimestamps="wordLevelTimestamps",r.EndSilenceTimeoutMs="endSilenceTimeoutMs",r.Format="format",r.InitialSilenceTimeoutMs="initialSilenceTimeoutMs",r.Language="language",r.Profanity="profanity",r.RequestBotStatusMessages="enableBotMessageStatus",r.StableIntermediateThreshold="stableIntermediateThreshold",r.StableTranslation="stableTranslation",r.TestHooks="testhooks"},function(e,t,i){"use strict";i.d(t,"d",(function(){return o})),i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return c})),i.d(t,"c",(function(){return h}));var r,n=i(2);class s extends n.b{constructor(e,t,i,r=n.a.Info){super(e,r),this.privRequestId=t,this.privSessionId=i}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}}class o extends s{constructor(e,t,i,r){super("RecognitionTriggeredEvent",e,t),this.privAudioSourceId=i,this.privAudioNodeId=r}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}class a extends s{constructor(e,t,i,r){super("ListeningStartedEvent",e,t),this.privAudioSourceId=i,this.privAudioNodeId=r}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}class c extends s{constructor(e,t,i){super("ConnectingToServiceEvent",e,i),this.privAuthFetchEventid=t}get authFetchEventid(){return this.privAuthFetchEventid}}class h extends s{constructor(e,t,i,r,n){super("RecognitionStartedEvent",e,n),this.privAudioSourceId=t,this.privAudioNodeId=i,this.privAuthFetchEventId=r}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}}!function(e){e[e.Success=0]="Success",e[e.AudioSourceError=1]="AudioSourceError",e[e.AudioSourceTimeout=2]="AudioSourceTimeout",e[e.AuthTokenFetchError=3]="AuthTokenFetchError",e[e.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",e[e.UnAuthorized=5]="UnAuthorized",e[e.ConnectTimeout=6]="ConnectTimeout",e[e.ConnectError=7]="ConnectError",e[e.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",e[e.UnknownError=9]="UnknownError"}(r||(r={}))},function(e,t,i){"use strict";var r;i.d(t,"a",(function(){return r})),function(e){e[e.NoError=0]="NoError",e[e.AuthenticationFailure=1]="AuthenticationFailure",e[e.BadRequestParameters=2]="BadRequestParameters",e[e.TooManyRequests=3]="TooManyRequests",e[e.ConnectionFailure=4]="ConnectionFailure",e[e.ServiceTimeout=5]="ServiceTimeout",e[e.ServiceError=6]="ServiceError",e[e.RuntimeError=7]="RuntimeError",e[e.Forbidden=8]="Forbidden"}(r||(r={}))},function(e,t,i){"use strict";i.d(t,"a",(function(){return h})),i.d(t,"b",(function(){return u})),i.d(t,"c",(function(){return p})),i.d(t,"d",(function(){return d}));var r=i(12),n=i(69),s=i(1),o=i(28),a=function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class c{constructor(){}static createPullStream(){return h.create()}}class h extends c{static create(){return new u}}class u extends h{constructor(){super(),this.privId=Object(r.a)(),this.privStream=new n.a}set format(e){null==e&&(this.privFormat=o.a.getDefaultOutputFormat()),this.privFormat=e}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}read(e){return a(this,void 0,void 0,(function*(){const t=new Int8Array(e);let i=0;if(void 0!==this.privLastChunkView){if(this.privLastChunkView.length>e.byteLength)return t.set(this.privLastChunkView.slice(0,e.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(e.byteLength),Promise.resolve(e.byteLength);t.set(this.privLastChunkView),i=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;i<e.byteLength&&!this.privStream.isReadEnded;){const r=yield this.privStream.read();if(void 0===r||r.isEnd)yield this.privStream.readEnded();else{let n;r.buffer.byteLength>e.byteLength-i?(n=r.buffer.slice(0,e.byteLength-i),this.privLastChunkView=new Int8Array(r.buffer.slice(e.byteLength-i))):n=r.buffer,t.set(new Int8Array(n),i),i+=n.byteLength}}return i}))}write(e){s.a.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}class p extends c{constructor(){super()}static create(e){return new d(e)}}class d extends p{constructor(e){super(),this.privId=Object(r.a)(),this.privCallback=e}set format(e){}write(e){this.privCallback.write&&this.privCallback.write(e)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}},function(e,t,i){"use strict";i.d(t,"c",(function(){return r})),i.d(t,"d",(function(){return c})),i.d(t,"e",(function(){return h})),i.d(t,"a",(function(){return u})),i.d(t,"b",(function(){return d})),i.d(t,"f",(function(){return s})),i.d(t,"g",(function(){return o}));var r,n,s,o,a=i(6);!function(e){e[e.Interactive=0]="Interactive",e[e.Conversation=1]="Conversation",e[e.Dictation=2]="Dictation"}(r||(r={})),function(e){e[e.Simple=0]="Simple",e[e.Detailed=1]="Detailed"}(n||(n={}));class c{constructor(e,t){this.privRecognitionMode=r.Interactive,this.privSpeechServiceConfig=e||new h(new u(null)),this.privParameters=t,this.privMaxRetryCount=parseInt(t.getProperty("SPEECH-Error-MaxRetryCount","4"),10)}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(e){this.privRecognitionMode=e,this.privRecognitionActivityTimeout=e===r.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=r[e]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==r.Interactive}get autoDetectSourceLanguages(){return this.parameters.getProperty(a.a.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get maxRetryCount(){return this.privMaxRetryCount}}class h{constructor(e){this.serialize=()=>JSON.stringify(this,(e,t)=>{if(t&&"object"==typeof t){const e={};for(const i in t)Object.hasOwnProperty.call(t,i)&&(e[i&&i.charAt(0).toLowerCase()+i.substring(1)]=t[i]);return e}return t}),this.context=e}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(e){this.recognition=e.toLowerCase()}}class u{constructor(e){this.system=new p,this.os=e}}class p{constructor(){this.name="SpeechSDK",this.version="1.20.0",this.build="JavaScript",this.lang="JavaScript"}}class d{constructor(e,t,i){this.platform=e,this.name=t,this.version=i}}!function(e){e.Bluetooth="Bluetooth",e.Wired="Wired",e.WiFi="WiFi",e.Cellular="Cellular",e.InBuilt="InBuilt",e.Unknown="Unknown"}(s||(s={})),function(e){e.Phone="Phone",e.Speaker="Speaker",e.Car="Car",e.Headset="Headset",e.Thermostat="Thermostat",e.Microphones="Microphones",e.Deskphone="Deskphone",e.RemoteControl="RemoteControl",e.Unknown="Unknown",e.File="File",e.Stream="Stream"}(o||(o={}))},function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));class r{constructor(e,t){this.privHeaderName=e,this.privToken=t}get headerName(){return this.privHeaderName}get token(){return this.privToken}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var r=i(3),n=i(6),s=i(16);class o{static getHostSuffix(e){if(e){if(e.toLowerCase().startsWith("china"))return".azure.cn";if(e.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(e,t,i){this.setUrlParameter(n.a.SpeechServiceConnection_EnableAudioLogging,s.a.EnableAudioLogging,e,t,i),this.setUrlParameter(n.a.SpeechServiceResponse_RequestWordLevelTimestamps,s.a.EnableWordLevelTimestamps,e,t,i),this.setUrlParameter(n.a.SpeechServiceResponse_ProfanityOption,s.a.Profanity,e,t,i),this.setUrlParameter(n.a.SpeechServiceConnection_InitialSilenceTimeoutMs,s.a.InitialSilenceTimeoutMs,e,t,i),this.setUrlParameter(n.a.SpeechServiceConnection_EndSilenceTimeoutMs,s.a.EndSilenceTimeoutMs,e,t,i),this.setUrlParameter(n.a.SpeechServiceResponse_StablePartialResultThreshold,s.a.StableIntermediateThreshold,e,t,i);const o=JSON.parse(e.parameters.getProperty(r.ServicePropertiesPropertyName,"{}"));Object.keys(o).forEach((e,i,r)=>{t[e]=o[e]})}setUrlParameter(e,t,i,r,n){const s=i.parameters.getProperty(e,void 0);!s||n&&-1!==n.search(t)||(r[t]=s.toLocaleLowerCase())}}},function(e,t){},function(e,t){},function(e,t,i){"use strict";var r;i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return s})),function(e){e[e.None=0]="None",e[e.Resolved=1]="Resolved",e[e.Rejected=2]="Rejected"}(r||(r={}));class n{constructor(){this.resolve=e=>(this.privResolve(e),this),this.reject=e=>(this.privReject(e),this),this.privPromise=new Promise((e,t)=>{this.privResolve=e,this.privReject=t})}get promise(){return this.privPromise}}function s(e,t,i){e.then(e=>{try{t&&t(e)}catch(e){if(i)try{if(e instanceof Error){const t=e;i(t.name+": "+t.message)}else i(e)}catch(e){}}},e=>{if(i)try{if(e instanceof Error){const t=e;i(t.name+": "+t.message)}else i(e)}catch(e){}})}},,function(e,t,i){"use strict";i.d(t,"a",(function(){return E}));var r=i(14),n=i(5),s=i(31),o=i(106),a=i(107),c=i(12),h=i(35),u=i(18);class p{constructor(e){this.privResult=e}get result(){return this.privResult}}var d=i(105);class v extends d.a{constructor(e,t,i,r,n){super(e,t,r,n),this.privAudioData=i}get audioData(){return this.privAudioData}}var l=i(32),f=i(58);class g{constructor(e,t,i,r){this.privAudioOffset=e,this.privText=t,this.privWordLength=i,this.privTextOffset=r}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}}class S{constructor(e,t){this.privAudioOffset=e,this.privText=t}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}}class m{constructor(e,t,i){this.privAudioOffset=e,this.privVisemeId=t,this.privAnimation=i}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}}var y=i(6),w=i(56),C=i(38),b=i(39),R=i(3),P=i(40),I=i(13),A=function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class E{constructor(e,t,i,o,a){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.sendSynthesisContext=e=>{const t=this.synthesisContext.toJSON();if(t)return e.send(new I.a(r.b.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",t))},this.sendSpeechServiceConfig=(e,t)=>{if(t)return e.send(new I.a(r.b.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",t))},this.sendSsmlMessage=(e,t,i)=>e.send(new I.a(r.b.Text,"ssml",i,"application/ssml+xml",t)),!e)throw new n.a("authentication");if(!t)throw new n.a("connectionFactory");if(!i)throw new n.a("synthesizerConfig");this.privAuthentication=e,this.privConnectionFactory=t,this.privSynthesizerConfig=i,this.privIsDisposed=!1,this.privSpeechSynthesizer=o,this.privSessionAudioDestination=a,this.privSynthesisTurn=new w.a,this.privConnectionEvents=new s.a,this.privServiceEvents=new s.a,this.privSynthesisContext=new C.a(this.privSpeechSynthesizer),this.privAgentConfig=new b.a,this.connectionEvents.attach(e=>{if("ConnectionClosedEvent"===e.name){const t=e;1e3!==t.statusCode&&this.cancelSynthesisLocal(h.a.Error,1007===t.statusCode?u.a.BadRequestParameters:u.a.ConnectionFailure,t.reason+" websocket error code: "+t.statusCode)}})}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(e){this.privActivityTemplate=e}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(e){this.privAudioOutputFormat=e,this.privSynthesisTurn.audioOutputFormat=e,void 0!==this.privSessionAudioDestination&&(this.privSessionAudioDestination.format=e),void 0!==this.synthesisContext&&(this.synthesisContext.audioOutputFormat=e)}static addHeader(e,t){if(!t.hasHeader)return e;t.updateHeader(e.byteLength);const i=new Uint8Array(e.byteLength+t.header.byteLength);return i.set(new Uint8Array(t.header),0),i.set(new Uint8Array(e),t.header.byteLength),i.buffer}isDisposed(){return this.privIsDisposed}dispose(e){return A(this,void 0,void 0,(function*(){if(this.privIsDisposed=!0,void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.close(),this.privConnectionConfigurationPromise){const t=yield this.privConnectionConfigurationPromise;yield t.dispose(e)}}))}connect(){return A(this,void 0,void 0,(function*(){yield this.connectImpl()}))}sendNetworkMessage(e,t){return A(this,void 0,void 0,(function*(){const i="string"==typeof t?r.b.Text:r.b.Binary,n="string"==typeof t?"application/json":"";return(yield this.fetchConnection()).send(new I.a(i,e,this.privSynthesisTurn.requestId,n,t))}))}Speak(e,t,i,r,n,s){return A(this,void 0,void 0,(function*(){let o;if(o=t?e:this.privSpeechSynthesizer.buildSsml(e),void 0!==this.speakOverride)return this.speakOverride(o,i,r,n);this.privSuccessCallback=r,this.privErrorCallback=n,this.privSynthesisTurn.startNewSynthesis(i,e,t,s);try{yield this.connectImpl();const e=yield this.fetchConnection();yield this.sendSynthesisContext(e),yield this.sendSsmlMessage(e,o,i);const t=new p(new v(i,l.a.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,t);this.receiveMessage()}catch(e){return this.cancelSynthesisLocal(h.a.Error,u.a.ConnectionFailure,e),Promise.reject(e)}}))}cancelSynthesis(e,t,i,r){const n=new f.a;n.setProperty(R.CancellationErrorCodePropertyName,u.a[i]);const s=new v(e,l.a.Canceled,void 0,r,n);if(this.privSpeechSynthesizer.SynthesisCanceled){const e=new p(s);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,e)}catch(e){}}if(this.privSuccessCallback)try{this.privSuccessCallback(s)}catch(e){}}cancelSynthesisLocal(e,t,i){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,e,t,i))}processTypeSpecificMessages(e,t,i){return!0}receiveMessage(){return A(this,void 0,void 0,(function*(){try{const e=yield this.fetchConnection(),t=yield e.read();if(void 0!==this.receiveMessageOverride)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!t)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;this.privServiceHasSentMessage=!0;const i=I.a.fromConnectionMessage(t);if(i.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(i.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse();break;case"response":this.privSynthesisTurn.onServiceResponseMessage(i.textBody);break;case"audio":if(this.privSynthesisTurn.streamId.toLowerCase()===i.streamId.toLowerCase()&&i.binaryBody){if(this.privSynthesisTurn.onAudioChunkReceived(i.binaryBody),this.privSpeechSynthesizer.synthesizing)try{const e=E.addHeader(i.binaryBody,this.privSynthesisTurn.audioOutputFormat),t=new p(new v(this.privSynthesisTurn.requestId,l.a.SynthesizingAudio,e));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,t)}catch(e){}void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.write(i.binaryBody)}break;case"audio.metadata":const e=P.b.fromJSON(i.textBody).Metadata;for(const t of e)switch(t.Type){case P.a.WordBoundary:this.privSynthesisTurn.onWordBoundaryEvent(t.Data.text.Text);const e=new g(t.Data.Offset,t.Data.text.Text,t.Data.text.Length,this.privSynthesisTurn.currentTextOffset);if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,e)}catch(e){}break;case P.a.Bookmark:const i=new S(t.Data.Offset,t.Data.Bookmark);if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,i)}catch(e){}break;case P.a.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(t),t.Data.IsLastAnimation){const e=new m(t.Data.Offset,t.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,e)}catch(e){}}}break;case"turn.end":let t;this.privSynthesisTurn.onServiceTurnEndResponse();try{const e=yield this.privSynthesisTurn.getAllReceivedAudioWithHeader();t=new v(this.privSynthesisTurn.requestId,l.a.SynthesizingAudioCompleted,e),this.privSuccessCallback&&this.privSuccessCallback(t)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new p(t))}catch(e){}break;default:this.processTypeSpecificMessages(i)||this.privServiceEvents&&this.serviceEvents.onEvent(new o.h(i.path.toLowerCase(),i.textBody))}return this.receiveMessage()}catch(e){}}))}connectImpl(e=!1){if(this.privConnectionPromise)return this.privConnectionPromise.then(e=>e.state()===a.a.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise,e=>(this.privConnectionId=null,this.privConnectionPromise=null,this.privServiceHasSentMessage=!1,this.connectImpl()));this.privAuthFetchEventId=Object(c.a)(),this.privConnectionId=Object(c.a)(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);const t=e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=t.then(t=>A(this,void 0,void 0,(function*(){yield this.privSynthesisTurn.onAuthCompleted(!1);const i=this.privConnectionFactory.create(this.privSynthesizerConfig,t,this.privConnectionId);i.events.attach(e=>{this.connectionEvents.onEvent(e)});const r=yield i.open();return 200===r.statusCode?(yield this.privSynthesisTurn.onConnectionEstablishCompleted(r.statusCode),Promise.resolve(i)):403!==r.statusCode||e?(yield this.privSynthesisTurn.onConnectionEstablishCompleted(r.statusCode,r.reason),Promise.reject(`Unable to contact server. StatusCode: ${r.statusCode}, ${this.privSynthesizerConfig.parameters.getProperty(y.a.SpeechServiceConnection_Endpoint)} Reason: ${r.reason}`)):this.connectImpl(!0)})),e=>A(this,void 0,void 0,(function*(){throw yield this.privSynthesisTurn.onAuthCompleted(!0,e),new Error(e)}))),this.privConnectionPromise.catch(()=>{}),this.privConnectionPromise}fetchConnection(){return A(this,void 0,void 0,(function*(){return this.privConnectionConfigurationPromise?this.privConnectionConfigurationPromise.then(e=>e.state()===a.a.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=null,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise,e=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=null,this.privServiceHasSentMessage=!1,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),yield this.privConnectionConfigurationPromise)}))}configureConnection(){return A(this,void 0,void 0,(function*(){const e=yield this.connectImpl();return void 0!==this.configConnectionOverride?this.configConnectionOverride(e):(yield this.sendSpeechServiceConfig(e,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),e)}))}}E.telemetryDataEnabled=!0},function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var r=i(4),n=i(0);class s extends n.c{constructor(e,t,i,r,n,s,o,a,c){super(i,s,t,e),this.formatTag=e,this.avgBytesPerSec=r,this.blockAlign=n,this.priAudioFormatString=o,this.priRequestAudioFormatString=a,this.priHasHeader=c}static fromSpeechSynthesisOutputFormat(e){return void 0===e?s.getDefaultOutputFormat():s.fromSpeechSynthesisOutputFormatString(s.SpeechSynthesisOutputFormatToString[e])}static fromSpeechSynthesisOutputFormatString(e){switch(e){case"raw-8khz-8bit-mono-mulaw":return new s(n.a.MuLaw,1,8e3,8e3,1,8,e,e,!1);case"riff-16khz-16kbps-mono-siren":return new s(n.a.Siren,1,16e3,2e3,40,0,e,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new s(n.a.Siren,1,16e3,2e3,40,0,e,e,!1);case"audio-16khz-32kbitrate-mono-mp3":return new s(n.a.MP3,1,16e3,4096,2,16,e,e,!1);case"audio-16khz-128kbitrate-mono-mp3":return new s(n.a.MP3,1,16e3,16384,2,16,e,e,!1);case"audio-16khz-64kbitrate-mono-mp3":return new s(n.a.MP3,1,16e3,8192,2,16,e,e,!1);case"audio-24khz-48kbitrate-mono-mp3":return new s(n.a.MP3,1,24e3,6144,2,16,e,e,!1);case"audio-24khz-96kbitrate-mono-mp3":return new s(n.a.MP3,1,24e3,12288,2,16,e,e,!1);case"audio-24khz-160kbitrate-mono-mp3":return new s(n.a.MP3,1,24e3,20480,2,16,e,e,!1);case"raw-16khz-16bit-mono-truesilk":return new s(n.a.SILKSkype,1,16e3,32e3,2,16,e,e,!1);case"riff-8khz-16bit-mono-pcm":return new s(n.a.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new s(n.a.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new s(n.a.MuLaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new s(n.a.PCM,1,16e3,32e3,2,16,e,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new s(n.a.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new s(n.a.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new s(n.a.OGG_OPUS,1,16e3,8192,2,16,e,e,!1);case"ogg-24khz-16bit-mono-opus":return new s(n.a.OGG_OPUS,1,24e3,8192,2,16,e,e,!1);case"raw-48khz-16bit-mono-pcm":return new s(n.a.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new s(n.a.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new s(n.a.MP3,1,48e3,12288,2,16,e,e,!1);case"audio-48khz-192kbitrate-mono-mp3":return new s(n.a.MP3,1,48e3,24576,2,16,e,e,!1);case"ogg-48khz-16bit-mono-opus":return new s(n.a.OGG_OPUS,1,48e3,12e3,2,16,e,e,!1);case"webm-16khz-16bit-mono-opus":return new s(n.a.WEBM_OPUS,1,16e3,4e3,2,16,e,e,!1);case"webm-24khz-16bit-mono-opus":return new s(n.a.WEBM_OPUS,1,24e3,6e3,2,16,e,e,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new s(n.a.WEBM_OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new s(n.a.OPUS,1,16e3,4e3,2,16,e,e,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new s(n.a.OPUS,1,24e3,6e3,2,16,e,e,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new s(n.a.OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-24khz-16bit-mono-flac":return new s(n.a.FLAC,1,24e3,24e3,2,16,e,e,!1);case"audio-48khz-16bit-mono-flac":return new s(n.a.FLAC,1,48e3,3e4,2,16,e,e,!1);case"raw-24khz-16bit-mono-truesilk":return new s(n.a.SILKSkype,1,24e3,48e3,2,16,e,e,!1);case"raw-8khz-8bit-mono-alaw":return new s(n.a.ALaw,1,8e3,8e3,1,8,e,e,!1);case"riff-8khz-8bit-mono-alaw":return new s(n.a.ALaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-alaw",!0);case"riff-16khz-16bit-mono-pcm":default:return new s(n.a.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return s.fromSpeechSynthesisOutputFormatString("undefined"!=typeof window?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(e){if(this.priHasHeader){new DataView(this.privHeader).setUint32(40,e,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}}s.SpeechSynthesisOutputFormatToString={[r.a.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[r.a.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[r.a.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[r.a.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[r.a.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[r.a.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[r.a.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[r.a.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[r.a.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[r.a.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[r.a.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[r.a.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[r.a.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[r.a.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[r.a.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[r.a.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[r.a.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[r.a.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[r.a.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[r.a.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[r.a.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[r.a.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[r.a.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[r.a.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[r.a.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[r.a.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[r.a.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[r.a.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[r.a.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[r.a.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[r.a.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[r.a.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[r.a.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus"}},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var r=i(25),n=i(14),s=i(70);class o{constructor(){this.toConnectionMessage=e=>{const t=new r.a;try{if(e.messageType===n.b.Text){const i=e.textContent;let r={},s=null;if(i){const e=i.split("\r\n\r\n");e&&e.length>0&&(r=this.parseHeaders(e[0]),e.length>1&&(s=e[1]))}t.resolve(new n.a(e.messageType,s,r,e.id))}else if(e.messageType===n.b.Binary){const i=e.binaryContent;let r={},s=null;if(!i||i.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");const o=new DataView(i),a=o.getInt16(0);if(i.byteLength<a+2)throw new Error("Invalid binary message format. Header content missing.");let c="";for(let e=0;e<a;e++)c+=String.fromCharCode(o.getInt8(e+2));r=this.parseHeaders(c),i.byteLength>a+2&&(s=i.slice(2+a)),t.resolve(new n.a(e.messageType,s,r,e.id))}}catch(e){t.reject("Error formatting the message. Error: "+e)}return t.promise},this.fromConnectionMessage=e=>{const t=new r.a;try{if(e.messageType===n.b.Text){const i=`${this.makeHeaders(e)}\r\n${e.textBody?e.textBody:""}`;t.resolve(new s.a(n.b.Text,i,e.id))}else if(e.messageType===n.b.Binary){const i=this.makeHeaders(e),r=e.binaryBody,o=this.stringToArrayBuffer(i),a=new Int8Array(o),c=a.byteLength,h=new Int8Array(2+c+(r?r.byteLength:0));if(h[0]=c>>8&255,h[1]=255&c,h.set(a,2),r){const e=new Int8Array(r);h.set(e,2+c)}const u=h.buffer;t.resolve(new s.a(n.b.Binary,u,e.id))}}catch(e){t.reject("Error formatting the message. "+e)}return t.promise},this.makeHeaders=e=>{let t="";if(e.headers)for(const i in e.headers)i&&(t+=`${i}: ${e.headers[i]}\r\n`);return t},this.parseHeaders=e=>{const t={};if(e){const i=e.match(/[^\r\n]+/g);if(t)for(const e of i)if(e){const i=e.indexOf(":"),r=i>0?e.substr(0,i).trim().toLowerCase():e,n=i>0&&e.length>i+1?e.substr(i+1).trim():"";t[r]=n}}return t},this.stringToArrayBuffer=e=>{const t=new ArrayBuffer(e.length),i=new DataView(t);for(let t=0;t<e.length;t++)i.setUint8(t,e.charCodeAt(t));return t}}}},function(e,t,i){"use strict";var r;i.d(t,"a",(function(){return r})),function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(r||(r={}))},function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var r=i(5),n=i(12);class s{constructor(e){this.privEventListeners={},this.privIsDisposed=!1,this.onEvent=e=>{if(this.isDisposed())throw new r.c("EventSource");if(this.metadata)for(const t in this.metadata)t&&e.metadata&&(e.metadata[t]||(e.metadata[t]=this.metadata[t]));for(const t in this.privEventListeners)t&&this.privEventListeners[t]&&this.privEventListeners[t](e)},this.attach=e=>{const t=Object(n.a)();return this.privEventListeners[t]=e,{detach:()=>(delete this.privEventListeners[t],Promise.resolve())}},this.attachListener=e=>this.attach(e.onEvent),this.isDisposed=()=>this.privIsDisposed,this.dispose=()=>{this.privEventListeners=null,this.privIsDisposed=!0},this.privMetadata=e}get metadata(){return this.privMetadata}}},function(e,t,i){"use strict";var r;i.d(t,"a",(function(){return r})),function(e){e[e.NoMatch=0]="NoMatch",e[e.Canceled=1]="Canceled",e[e.RecognizingSpeech=2]="RecognizingSpeech",e[e.RecognizedSpeech=3]="RecognizedSpeech",e[e.RecognizedKeyword=4]="RecognizedKeyword",e[e.RecognizingIntent=5]="RecognizingIntent",e[e.RecognizedIntent=6]="RecognizedIntent",e[e.TranslatingSpeech=7]="TranslatingSpeech",e[e.TranslatedSpeech=8]="TranslatedSpeech",e[e.SynthesizingAudio=9]="SynthesizingAudio",e[e.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",e[e.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",e[e.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",e[e.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",e[e.RecognizedSpeakers=14]="RecognizedSpeakers",e[e.RecognizedSpeaker=15]="RecognizedSpeaker",e[e.ResetVoiceProfile=16]="ResetVoiceProfile",e[e.DeletedVoiceProfile=17]="DeletedVoiceProfile",e[e.VoicesListRetrieved=18]="VoicesListRetrieved"}(r||(r={}))},function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var r=i(5);class n{constructor(e){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.get=e=>(this.throwIfDisposed(),this.privList[e]),this.first=()=>this.get(0),this.last=()=>this.get(this.length()-1),this.add=e=>{this.throwIfDisposed(),this.insertAt(this.privList.length,e)},this.insertAt=(e,t)=>{this.throwIfDisposed(),0===e?this.privList.unshift(t):e===this.privList.length?this.privList.push(t):this.privList.splice(e,0,t),this.triggerSubscriptions(this.privAddSubscriptions)},this.removeFirst=()=>(this.throwIfDisposed(),this.removeAt(0)),this.removeLast=()=>(this.throwIfDisposed(),this.removeAt(this.length()-1)),this.removeAt=e=>(this.throwIfDisposed(),this.remove(e,1)[0]),this.remove=(e,t)=>{this.throwIfDisposed();const i=this.privList.splice(e,t);return this.triggerSubscriptions(this.privRemoveSubscriptions),i},this.clear=()=>{this.throwIfDisposed(),this.remove(0,this.length())},this.length=()=>(this.throwIfDisposed(),this.privList.length),this.onAdded=e=>{this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[t]=e,{detach:()=>(delete this.privAddSubscriptions[t],Promise.resolve())}},this.onRemoved=e=>{this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[t]=e,{detach:()=>(delete this.privRemoveSubscriptions[t],Promise.resolve())}},this.onDisposed=e=>{this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[t]=e,{detach:()=>(delete this.privDisposedSubscriptions[t],Promise.resolve())}},this.join=e=>(this.throwIfDisposed(),this.privList.join(e)),this.toArray=()=>{const e=Array();return this.privList.forEach(t=>{e.push(t)}),e},this.any=e=>(this.throwIfDisposed(),e?this.where(e).length()>0:this.length()>0),this.all=e=>(this.throwIfDisposed(),this.where(e).length()===this.length()),this.forEach=e=>{this.throwIfDisposed();for(let t=0;t<this.length();t++)e(this.privList[t],t)},this.select=e=>{this.throwIfDisposed();const t=[];for(let i=0;i<this.privList.length;i++)t.push(e(this.privList[i],i));return new n(t)},this.where=e=>{this.throwIfDisposed();const t=new n;for(let i=0;i<this.privList.length;i++)e(this.privList[i],i)&&t.add(this.privList[i]);return t},this.orderBy=e=>{this.throwIfDisposed();const t=this.toArray().sort(e);return new n(t)},this.orderByDesc=e=>(this.throwIfDisposed(),this.orderBy((t,i)=>e(i,t))),this.clone=()=>(this.throwIfDisposed(),new n(this.toArray())),this.concat=e=>(this.throwIfDisposed(),new n(this.privList.concat(e.toArray()))),this.concatArray=e=>(this.throwIfDisposed(),new n(this.privList.concat(e))),this.isDisposed=()=>null==this.privList,this.dispose=e=>{this.isDisposed()||(this.privDisposeReason=e,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))},this.throwIfDisposed=()=>{if(this.isDisposed())throw new r.c("List",this.privDisposeReason)},this.triggerSubscriptions=e=>{if(e)for(const t in e)t&&e[t]()},this.privList=[],e)for(const t of e)this.privList.push(t)}}var s,o=i(25),a=function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};!function(e){e[e.Dequeue=0]="Dequeue",e[e.Peek=1]="Peek"}(s||(s={}));class c{constructor(e){this.privPromiseStore=new n,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.enqueue=e=>{this.throwIfDispose(),this.enqueueFromPromise(new Promise((t,i)=>{t(e)}))},this.enqueueFromPromise=e=>{this.throwIfDispose(),e.then(e=>{this.privList.add(e)},e=>{})},this.dequeue=()=>{this.throwIfDispose();const e=new o.a;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:s.Dequeue}),this.drain()),e.promise},this.peek=()=>{this.throwIfDispose();const e=new o.a;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:s.Peek}),this.drain()),e.promise},this.length=()=>(this.throwIfDispose(),this.privList.length()),this.isDisposed=()=>null==this.privSubscribers,this.drain=()=>{if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;const e=this.privSubscribers,t=this.privList;if(e&&t){for(;t.length()>0&&e.length()>0&&!this.privIsDisposing;){const i=e.removeFirst();if(i.type===s.Peek)i.deferral.resolve(t.first());else{const e=t.removeFirst();i.deferral.resolve(e)}}this.privSubscribers===e&&(this.privSubscribers=e),this.privList===t&&(this.privList=t)}this.privIsDrainInProgress=!1}},this.throwIfDispose=()=>{if(this.isDisposed()){if(this.privDisposeReason)throw new r.b(this.privDisposeReason);throw new r.c("Queue")}if(this.privIsDisposing)throw new r.b("Queue disposing")},this.privList=e||new n,this.privDetachables=[],this.privSubscribers=new n,this.privDetachables.push(this.privList.onAdded(this.drain))}drainAndDispose(e,t){return a(this,void 0,void 0,(function*(){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=t,this.privIsDisposing=!0;const i=this.privSubscribers;if(i){for(;i.length()>0;){i.removeFirst().deferral.resolve(void 0)}this.privSubscribers===i&&(this.privSubscribers=i)}for(const e of this.privDetachables)yield e.detach();if(this.privPromiseStore.length()>0&&e){const t=[];return this.privPromiseStore.toArray().forEach(e=>{t.push(e)}),Promise.all(t).finally(()=>{this.privSubscribers=null,this.privList.forEach((t,i)=>{e(t)}),this.privList=null}).then()}this.privSubscribers=null,this.privList=null}}))}dispose(e){return a(this,void 0,void 0,(function*(){yield this.drainAndDispose(null,e)}))}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var r=i(5),n=i(31);class s{static get instance(){return s.privInstance}}s.privInstance=new n.a,s.setEventSource=e=>{if(!e)throw new r.a("eventSource");s.privInstance=e}},function(e,t,i){"use strict";var r;i.d(t,"a",(function(){return r})),function(e){e[e.Error=0]="Error",e[e.EndOfStream=1]="EndOfStream"}(r||(r={}))},function(e,t,i){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=i(93),n=i(94),s=i(95);function o(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,i){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,i);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return p(this,e)}return h(this,e,t,i)}function h(e,t,i,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,i,r){if(t.byteLength,i<0||t.byteLength<i)throw new RangeError("'offset' is out of bounds");if(t.byteLength<i+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===i&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,i):new Uint8Array(t,i,r);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=d(e,t);return e}(e,t,i,r):"string"==typeof t?function(e,t,i){"string"==typeof i&&""!==i||(i="utf8");if(!c.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var r=0|l(t,i),n=(e=a(e,r)).write(t,i);n!==r&&(e=e.slice(0,n));return e}(e,t,i):function(e,t){if(c.isBuffer(t)){var i=0|v(t.length);return 0===(e=a(e,i)).length||t.copy(e,0,0,i),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?a(e,0):d(e,t);if("Buffer"===t.type&&s(t.data))return d(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function p(e,t){if(u(t),e=a(e,t<0?0:0|v(t)),!c.TYPED_ARRAY_SUPPORT)for(var i=0;i<t;++i)e[i]=0;return e}function d(e,t){var i=t.length<0?0:0|v(t.length);e=a(e,i);for(var r=0;r<i;r+=1)e[r]=255&t[r];return e}function v(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function l(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var i=e.length;if(0===i)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return q(e).length;default:if(r)return U(e).length;t=(""+t).toLowerCase(),r=!0}}function f(e,t,i){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return O(this,t,i);case"utf8":case"utf-8":return A(this,t,i);case"ascii":return E(this,t,i);case"latin1":case"binary":return T(this,t,i);case"base64":return I(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,i);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}function S(e,t,i,r,n){if(0===e.length)return-1;if("string"==typeof i?(r=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=n?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(n)return-1;i=e.length-1}else if(i<0){if(!n)return-1;i=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:m(e,t,i,r,n);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):m(e,[t],i,r,n);throw new TypeError("val must be string, number or Buffer")}function m(e,t,i,r,n){var s,o=1,a=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,a/=2,c/=2,i/=2}function h(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(n){var u=-1;for(s=i;s<a;s++)if(h(e,s)===h(t,-1===u?0:s-u)){if(-1===u&&(u=s),s-u+1===c)return u*o}else-1!==u&&(s-=s-u),u=-1}else for(i+c>a&&(i=a-c),s=i;s>=0;s--){for(var p=!0,d=0;d<c;d++)if(h(e,s+d)!==h(t,d)){p=!1;break}if(p)return s}return-1}function y(e,t,i,r){i=Number(i)||0;var n=e.length-i;r?(r=Number(r))>n&&(r=n):r=n;var s=t.length;if(s%2!=0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var o=0;o<r;++o){var a=parseInt(t.substr(2*o,2),16);if(isNaN(a))return o;e[i+o]=a}return o}function w(e,t,i,r){return K(U(t,e.length-i),e,i,r)}function C(e,t,i,r){return K(function(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}(t),e,i,r)}function b(e,t,i,r){return C(e,t,i,r)}function R(e,t,i,r){return K(q(t),e,i,r)}function P(e,t,i,r){return K(function(e,t){for(var i,r,n,s=[],o=0;o<e.length&&!((t-=2)<0);++o)i=e.charCodeAt(o),r=i>>8,n=i%256,s.push(n),s.push(r);return s}(t,e.length-i),e,i,r)}function I(e,t,i){return 0===t&&i===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,i))}function A(e,t,i){i=Math.min(e.length,i);for(var r=[],n=t;n<i;){var s,o,a,c,h=e[n],u=null,p=h>239?4:h>223?3:h>191?2:1;if(n+p<=i)switch(p){case 1:h<128&&(u=h);break;case 2:128==(192&(s=e[n+1]))&&(c=(31&h)<<6|63&s)>127&&(u=c);break;case 3:s=e[n+1],o=e[n+2],128==(192&s)&&128==(192&o)&&(c=(15&h)<<12|(63&s)<<6|63&o)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:s=e[n+1],o=e[n+2],a=e[n+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&(c=(15&h)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&c<1114112&&(u=c)}null===u?(u=65533,p=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),n+=p}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var i="",r=0;for(;r<t;)i+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return i}(r)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=o(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,i){return h(null,e,t,i)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,i){return function(e,t,i,r){return u(t),t<=0?a(e,t):void 0!==i?"string"==typeof r?a(e,t).fill(i,r):a(e,t).fill(i):a(e,t)}(null,e,t,i)},c.allocUnsafe=function(e){return p(null,e)},c.allocUnsafeSlow=function(e){return p(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var i=e.length,r=t.length,n=0,s=Math.min(i,r);n<s;++n)if(e[n]!==t[n]){i=e[n],r=t[n];break}return i<r?-1:r<i?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!s(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var i;if(void 0===t)for(t=0,i=0;i<e.length;++i)t+=e[i].length;var r=c.allocUnsafe(t),n=0;for(i=0;i<e.length;++i){var o=e[i];if(!c.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,n),n+=o.length}return r},c.byteLength=l,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):f.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",i=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,i,r,n){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===i&&(i=e?e.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),t<0||i>e.length||r<0||n>this.length)throw new RangeError("out of range index");if(r>=n&&t>=i)return 0;if(r>=n)return-1;if(t>=i)return 1;if(this===e)return 0;for(var s=(n>>>=0)-(r>>>=0),o=(i>>>=0)-(t>>>=0),a=Math.min(s,o),h=this.slice(r,n),u=e.slice(t,i),p=0;p<a;++p)if(h[p]!==u[p]){s=h[p],o=u[p];break}return s<o?-1:o<s?1:0},c.prototype.includes=function(e,t,i){return-1!==this.indexOf(e,t,i)},c.prototype.indexOf=function(e,t,i){return S(this,e,t,i,!0)},c.prototype.lastIndexOf=function(e,t,i){return S(this,e,t,i,!1)},c.prototype.write=function(e,t,i,r){if(void 0===t)r="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)r=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(i)?(i|=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}var n=this.length-t;if((void 0===i||i>n)&&(i=n),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return y(this,e,t,i);case"utf8":case"utf-8":return w(this,e,t,i);case"ascii":return C(this,e,t,i);case"latin1":case"binary":return b(this,e,t,i);case"base64":return R(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,t,i);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function E(e,t,i){var r="";i=Math.min(e.length,i);for(var n=t;n<i;++n)r+=String.fromCharCode(127&e[n]);return r}function T(e,t,i){var r="";i=Math.min(e.length,i);for(var n=t;n<i;++n)r+=String.fromCharCode(e[n]);return r}function O(e,t,i){var r=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>r)&&(i=r);for(var n="",s=t;s<i;++s)n+=F(e[s]);return n}function M(e,t,i){for(var r=e.slice(t,i),n="",s=0;s<r.length;s+=2)n+=String.fromCharCode(r[s]+256*r[s+1]);return n}function D(e,t,i){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}function k(e,t,i,r,n,s){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<s)throw new RangeError('"value" argument is out of bounds');if(i+r>e.length)throw new RangeError("Index out of range")}function z(e,t,i,r){t<0&&(t=65535+t+1);for(var n=0,s=Math.min(e.length-i,2);n<s;++n)e[i+n]=(t&255<<8*(r?n:1-n))>>>8*(r?n:1-n)}function N(e,t,i,r){t<0&&(t=4294967295+t+1);for(var n=0,s=Math.min(e.length-i,4);n<s;++n)e[i+n]=t>>>8*(r?n:3-n)&255}function x(e,t,i,r,n,s){if(i+r>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function B(e,t,i,r,s){return s||x(e,0,i,4),n.write(e,t,i,r,23,4),i+4}function L(e,t,i,r,s){return s||x(e,0,i,8),n.write(e,t,i,r,52,8),i+8}c.prototype.slice=function(e,t){var i,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(i=this.subarray(e,t)).__proto__=c.prototype;else{var n=t-e;i=new c(n,void 0);for(var s=0;s<n;++s)i[s]=this[s+e]}return i},c.prototype.readUIntLE=function(e,t,i){e|=0,t|=0,i||D(e,t,this.length);for(var r=this[e],n=1,s=0;++s<t&&(n*=256);)r+=this[e+s]*n;return r},c.prototype.readUIntBE=function(e,t,i){e|=0,t|=0,i||D(e,t,this.length);for(var r=this[e+--t],n=1;t>0&&(n*=256);)r+=this[e+--t]*n;return r},c.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,i){e|=0,t|=0,i||D(e,t,this.length);for(var r=this[e],n=1,s=0;++s<t&&(n*=256);)r+=this[e+s]*n;return r>=(n*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,i){e|=0,t|=0,i||D(e,t,this.length);for(var r=t,n=1,s=this[e+--r];r>0&&(n*=256);)s+=this[e+--r]*n;return s>=(n*=128)&&(s-=Math.pow(2,8*t)),s},c.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},c.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},c.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),n.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),n.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),n.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),n.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,i,r){(e=+e,t|=0,i|=0,r)||k(this,e,t,i,Math.pow(2,8*i)-1,0);var n=1,s=0;for(this[t]=255&e;++s<i&&(n*=256);)this[t+s]=e/n&255;return t+i},c.prototype.writeUIntBE=function(e,t,i,r){(e=+e,t|=0,i|=0,r)||k(this,e,t,i,Math.pow(2,8*i)-1,0);var n=i-1,s=1;for(this[t+n]=255&e;--n>=0&&(s*=256);)this[t+n]=e/s&255;return t+i},c.prototype.writeUInt8=function(e,t,i){return e=+e,t|=0,i||k(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,i){return e=+e,t|=0,i||k(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):z(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,i){return e=+e,t|=0,i||k(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):z(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,i){return e=+e,t|=0,i||k(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,i){return e=+e,t|=0,i||k(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,i,r){if(e=+e,t|=0,!r){var n=Math.pow(2,8*i-1);k(this,e,t,i,n-1,-n)}var s=0,o=1,a=0;for(this[t]=255&e;++s<i&&(o*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+i},c.prototype.writeIntBE=function(e,t,i,r){if(e=+e,t|=0,!r){var n=Math.pow(2,8*i-1);k(this,e,t,i,n-1,-n)}var s=i-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+i},c.prototype.writeInt8=function(e,t,i){return e=+e,t|=0,i||k(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,i){return e=+e,t|=0,i||k(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):z(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,i){return e=+e,t|=0,i||k(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):z(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,i){return e=+e,t|=0,i||k(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,i){return e=+e,t|=0,i||k(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,i){return B(this,e,t,!0,i)},c.prototype.writeFloatBE=function(e,t,i){return B(this,e,t,!1,i)},c.prototype.writeDoubleLE=function(e,t,i){return L(this,e,t,!0,i)},c.prototype.writeDoubleBE=function(e,t,i){return L(this,e,t,!1,i)},c.prototype.copy=function(e,t,i,r){if(i||(i=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<i&&(r=i),r===i)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-i&&(r=e.length-t+i);var n,s=r-i;if(this===e&&i<t&&t<r)for(n=s-1;n>=0;--n)e[n+t]=this[n+i];else if(s<1e3||!c.TYPED_ARRAY_SUPPORT)for(n=0;n<s;++n)e[n+t]=this[n+i];else Uint8Array.prototype.set.call(e,this.subarray(i,i+s),t);return s},c.prototype.fill=function(e,t,i,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),1===e.length){var n=e.charCodeAt(0);n<256&&(e=n)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;var s;if(t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0),"number"==typeof e)for(s=t;s<i;++s)this[s]=e;else{var o=c.isBuffer(e)?e:U(new c(e,r).toString()),a=o.length;for(s=0;s<i-t;++s)this[s+t]=o[s%a]}return this};var _=/[^+\/0-9A-Za-z-_]/g;function F(e){return e<16?"0"+e.toString(16):e.toString(16)}function U(e,t){var i;t=t||1/0;for(var r=e.length,n=null,s=[],o=0;o<r;++o){if((i=e.charCodeAt(o))>55295&&i<57344){if(!n){if(i>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&s.push(239,191,189);continue}n=i;continue}if(i<56320){(t-=3)>-1&&s.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&(t-=3)>-1&&s.push(239,191,189);if(n=null,i<128){if((t-=1)<0)break;s.push(i)}else if(i<2048){if((t-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return s}function q(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(_,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function K(e,t,i,r){for(var n=0;n<r&&!(n+i>=t.length||n>=e.length);++n)t[n+i]=e[n];return n}}).call(this,i(37))},function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));class r{constructor(e){this.privContext={},this.privSpeechSynthesizer=e}setSection(e,t){this.privContext[e]=t}set audioOutputFormat(e){this.privAudioOutputFormat=e}toJSON(){const e=this.buildSynthesisContext();return this.setSection("synthesis",e),JSON.stringify(this.privContext)}buildSynthesisContext(){return{audio:{metadataOptions:{bookmarkEnabled:!!this.privSpeechSynthesizer.bookmarkReached,sentenceBoundaryEnabled:!1,visemeEnabled:!!this.privSpeechSynthesizer.visemeReceived,wordBoundaryEnabled:!!this.privSpeechSynthesizer.wordBoundary},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:this.privSpeechSynthesizer.autoDetectSourceLanguage}}}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));class r{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(e){this.iPrivConfig=e}}},function(e,t,i){"use strict";var r;i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return n})),function(e){e.WordBoundary="WordBoundary",e.Bookmark="Bookmark",e.Viseme="Viseme"}(r||(r={}));class n{constructor(e){this.privSynthesisAudioMetadata=JSON.parse(e)}static fromJSON(e){return new n(e)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));class r{addPhrase(e){this.privPhrases||(this.privPhrases=[]),e instanceof Array?this.privPhrases=this.privPhrases.concat(e):this.privPhrases.push(e)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(e){this.privGrammars||(this.privGrammars=[]),e instanceof Array?this.privGrammars=this.privGrammars.concat(e):this.privGrammars.push(e)}clearGrammars(){this.privGrammars=void 0}generateGrammarObject(){if(void 0===this.privGrammars&&void 0===this.privPhrases)return;const e={};if(e.ReferenceGrammars=this.privGrammars,void 0!==this.privPhrases&&0!==this.privPhrases.length){const t=[];this.privPhrases.forEach((e,i,r)=>{t.push({Text:e})}),e.Groups=[{Type:"Generic",Items:t}]}return e}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));class r{constructor(e){this.privContext={},this.privDynamicGrammar=e}setSection(e,t){this.privContext[e]=t}setPronunciationAssessmentParams(e){void 0===this.privContext.phraseDetection&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(e),void 0===this.privContext.phraseOutput&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.format="Detailed",this.privContext.phraseOutput.detailed.options.push("PronunciationAssessment"),-1===this.privContext.phraseOutput.detailed.options.indexOf("WordTimings")&&this.privContext.phraseOutput.detailed.options.push("WordTimings"),-1===this.privContext.phraseOutput.detailed.options.indexOf("SNR")&&this.privContext.phraseOutput.detailed.options.push("SNR")}toJSON(){const e=this.privDynamicGrammar.generateGrammarObject();this.setSection("dgi",e);return JSON.stringify(this.privContext)}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));class r{constructor(e){this.privSpeechStartDetected=JSON.parse(e)}static fromJSON(e){return new r(e)}get Offset(){return this.privSpeechStartDetected.Offset}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var r=i(5),n=i(9),s=i(21);class o{constructor(e){if(this.fetch=e=>Promise.resolve(this.privAuthInfo),this.fetchOnExpiry=e=>Promise.resolve(this.privAuthInfo),!e)throw new r.a("subscriptionKey");this.privAuthInfo=new s.a(n.a.AuthKey,e)}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var r=i(5),n=i(21);class s{constructor(e,t){if(this.fetch=e=>this.privFetchCallback(e).then(e=>new n.a("Authorization",s.privTokenPrefix+e)),this.fetchOnExpiry=e=>this.privFetchOnExpiryCallback(e).then(e=>new n.a("Authorization",s.privTokenPrefix+e)),!e)throw new r.a("fetchCallback");if(!t)throw new r.a("fetchOnExpiryCallback");this.privFetchCallback=e,this.privFetchOnExpiryCallback=t}}s.privTokenPrefix="bearer "},function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var r=i(72),n=i(71),s=i(6),o=i(22),a=i(29),c=i(9),h=i(16);class u extends o.a{constructor(){super(...arguments),this.create=(e,t,i)=>{let u=e.parameters.getProperty(s.a.SpeechServiceConnection_Endpoint,void 0);if(!u){const t=e.parameters.getProperty(s.a.SpeechServiceConnection_Region,void 0),i=o.a.getHostSuffix(t);u=e.parameters.getProperty(s.a.SpeechServiceConnection_Host,"wss://"+t+".s2s.speech"+i)+"/speech/translation/cognitiveservices/v1"}const p={from:e.parameters.getProperty(s.a.SpeechServiceConnection_RecoLanguage),to:e.parameters.getProperty(s.a.SpeechServiceConnection_TranslationToLanguages)};this.setCommonUrlParams(e,p,u),this.setUrlParameter(s.a.SpeechServiceResponse_TranslationRequestStablePartialResult,h.a.StableTranslation,e,p,u);void 0!==e.parameters.getProperty(s.a.SpeechServiceConnection_TranslationVoice,void 0)&&(p.voice=e.parameters.getProperty(s.a.SpeechServiceConnection_TranslationVoice),p.features="texttospeech");const d={};void 0!==t.token&&""!==t.token&&(d[t.headerName]=t.token),d[c.a.ConnectionId]=i,e.parameters.setProperty(s.a.SpeechServiceConnection_Url,u);const v="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new r.a(u,p,d,new a.a,n.a.fromRecognizerConfig(e),v,i)}}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var r=i(32),n=i(35),s=i(18),o=i(10);class a{static implTranslateRecognitionResult(e){let t=r.a.Canceled;switch(e){case o.a.Success:t=r.a.RecognizedSpeech;break;case o.a.NoMatch:case o.a.InitialSilenceTimeout:case o.a.BabbleTimeout:case o.a.EndOfDictation:t=r.a.NoMatch;break;case o.a.Error:case o.a.BadRequest:case o.a.Forbidden:default:t=r.a.Canceled}return t}static implTranslateCancelResult(e){let t=n.a.EndOfStream;switch(e){case o.a.Success:case o.a.EndOfDictation:case o.a.NoMatch:t=n.a.EndOfStream;break;case o.a.InitialSilenceTimeout:case o.a.BabbleTimeout:case o.a.Error:case o.a.BadRequest:case o.a.Forbidden:default:t=n.a.Error}return t}static implTranslateCancelErrorCode(e){let t=s.a.NoError;switch(e){case o.a.Error:t=s.a.ServiceError;break;case o.a.TooManyRequests:t=s.a.TooManyRequests;break;case o.a.BadRequest:t=s.a.BadRequestParameters;break;case o.a.Forbidden:t=s.a.Forbidden;break;default:t=s.a.NoError}return t}static implTranslateErrorDetails(e){let t="The speech service encountered an internal error and could not continue.";switch(e){case s.a.Forbidden:t="The recognizer is using a free subscription that ran out of quota.";break;case s.a.BadRequestParameters:t="Invalid parameter or unsupported audio format in the request.";break;case s.a.TooManyRequests:t="The number of parallel requests exceeded the number of allowed concurrent transcriptions."}return t}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var r=i(30);class n{constructor(e){this.privTranslationHypothesis=JSON.parse(e),this.privTranslationHypothesis.Translation.TranslationStatus=r.a[this.privTranslationHypothesis.Translation.TranslationStatus]}static fromJSON(e){return new n(e)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var r=i(1),n=i(10),s=i(30);class o{constructor(e){this.privTranslationPhrase=e,this.privTranslationPhrase.RecognitionStatus=n.a[this.privTranslationPhrase.RecognitionStatus],void 0!==this.privTranslationPhrase.Translation&&(this.privTranslationPhrase.Translation.TranslationStatus=s.a[this.privTranslationPhrase.Translation.TranslationStatus])}static fromJSON(e){return new o(JSON.parse(e))}static fromTranslationResponse(e){r.a.throwIfNullOrUndefined(e,"translationResponse");const t=e.SpeechPhrase;return e.SpeechPhrase=void 0,t.Translation=e,t.Text=t.DisplayText,new o(t)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Translation(){return this.privTranslationPhrase.Translation}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var r=i(10);class n{constructor(e){this.privSynthesisEnd=JSON.parse(e),this.privSynthesisEnd.SynthesisStatus=r.b[this.privSynthesisEnd.SynthesisStatus]}static fromJSON(e){return new n(e)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var r=i(72),n=i(71),s=i(6),o=i(22),a=i(29),c=i(9),h=i(16);class u{constructor(){this.synthesisUri="/cognitiveservices/websocket/v1",this.create=(e,t,i)=>{let u=e.parameters.getProperty(s.a.SpeechServiceConnection_Endpoint,void 0);const p=e.parameters.getProperty(s.a.SpeechServiceConnection_Region,void 0),d=o.a.getHostSuffix(p),v=e.parameters.getProperty(s.a.SpeechServiceConnection_EndpointId,void 0),l=void 0===v?"tts":"voice",f=e.parameters.getProperty(s.a.SpeechServiceConnection_Host,"wss://"+p+"."+l+".speech"+d);u||(u=f+this.synthesisUri);const g={};void 0!==t.token&&""!==t.token&&(g[t.headerName]=t.token),g[c.a.ConnectionId]=i,void 0!==v&&(g[h.a.CustomVoiceDeploymentId]=v),e.parameters.setProperty(s.a.SpeechServiceConnection_Url,u);const S="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new r.a(u,{},g,new a.a,n.a.fromParameters(e.parameters),S,i)}}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var r,n=i(20);!function(e){e[e.Standard=0]="Standard",e[e.Custom=1]="Custom"}(r||(r={}));class s{constructor(e,t){this.privSynthesisServiceType=r.Standard,this.privSpeechServiceConfig=e||new n.e(new n.a(null)),this.privParameters=t}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(e){this.privSynthesisServiceType=e}get SpeechServiceConfig(){return this.privSpeechServiceConfig}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return A}));var r=i(14),n=i(30),s=i(58);class o extends class extends class{constructor(e,t,i,r,n,s,o,a,c,h){this.privResultId=e,this.privReason=t,this.privText=i,this.privDuration=r,this.privOffset=n,this.privLanguage=s,this.privLanguageDetectionConfidence=o,this.privErrorDetails=a,this.privJson=c,this.privProperties=h}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}}{constructor(e,t,i,r,n,s,o,a,c,h,u){super(e,t,i,r,n,s,o,c,h,u),this.privSpeakerId=a}get speakerId(){return this.privSpeakerId}}{constructor(e,t,i,r,n,s,o,a,c){super(t,i,r,n,s,void 0,void 0,void 0,o,a,c),this.privTranslations=e}get translations(){return this.privTranslations}}var a=i(32),c=i(109);class h extends c.a{constructor(e,t,i){super(t,i),this.privResult=e}get result(){return this.privResult}}var u=i(6);class p{constructor(e,t){this.privReason=e,this.privAudio=t}get audio(){return this.privAudio}get reason(){return this.privReason}}var d=i(102);class v extends d.a{constructor(e,t){super(t),this.privResult=e}get result(){return this.privResult}}class l{constructor(e,t,i,r,n){this.privCancelReason=t,this.privErrorDetails=i,this.privResult=n,this.privSessionId=e,this.privErrorCode=r}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}var f=i(35),g=i(18);class S{constructor(){this.privMap=new s.a}get(e,t){return this.privMap.getProperty(e,t)}set(e,t){this.privMap.setProperty(e,t)}get languages(){return this.privMap.keys}}var m=i(54),y=i(10),w=i(47),C=i(48),b=i(49),R=i(50),P=i(3),I=function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class A extends m.a{constructor(e,t,i,r,n){super(e,t,i,r,n),this.privTranslationRecognizer=n,this.connectionEvents.attach(e=>I(this,void 0,void 0,(function*(){"ConnectionEstablishedEvent"===e.name?this.privTranslationRecognizer.onConnection():"ConnectionClosedEvent"===e.name&&(yield this.privTranslationRecognizer.onDisconnection())})))}processTypeSpecificMessages(e){return I(this,void 0,void 0,(function*(){const t=new s.a;let i=!1;const n=r=>I(this,void 0,void 0,(function*(){if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+r.Offset+r.Duration),r.RecognitionStatus===y.a.Success){const e=this.fireEventForResult(r,t);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,e)}catch(e){}if(this.privSuccessCallback){try{this.privSuccessCallback(e.result)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{const n=w.a.implTranslateRecognitionResult(r.RecognitionStatus),s=new o(void 0,this.privRequestSession.requestId,n,r.Text,r.Duration,this.privRequestSession.currentTurnAudioOffset+r.Offset,void 0,e.textBody,t);if(n===a.a.Canceled){const e=w.a.implTranslateCancelResult(r.RecognitionStatus),t=w.a.implTranslateCancelErrorCode(r.RecognitionStatus);yield this.cancelRecognitionLocal(e,t,w.a.implTranslateErrorDetails(t))}else{if(!this.privRequestSession.isSpeechEnded||n!==a.a.NoMatch||r.RecognitionStatus===y.a.InitialSilenceTimeout){const e=new h(s,s.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,e)}catch(e){}}if(this.privSuccessCallback){try{this.privSuccessCallback(s)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}i=!0}}));switch(e.messageType===r.b.Text&&t.setProperty(u.a.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"translation.hypothesis":const r=this.fireEventForResult(C.a.fromJSON(e.textBody),t);if(this.privRequestSession.onHypothesis(this.privRequestSession.currentTurnAudioOffset+r.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,r)}catch(e){}i=!0;break;case"translation.response":const s=JSON.parse(e.textBody);s.SpeechPhrase&&(yield n(b.a.fromTranslationResponse(s)));break;case"translation.phrase":yield n(b.a.fromJSON(e.textBody));break;case"translation.synthesis":this.sendSynthesisAudio(e.binaryBody,this.privRequestSession.sessionId),i=!0;break;case"translation.synthesis.end":const o=R.a.fromJSON(e.textBody);switch(o.SynthesisStatus){case y.b.Error:if(this.privTranslationRecognizer.synthesizing){const e=new p(a.a.Canceled,void 0),t=new v(e,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,t)}catch(e){}}if(this.privTranslationRecognizer.canceled){const e=new l(this.privRequestSession.sessionId,f.a.Error,o.FailureReason,g.a.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,e)}catch(e){}}break;case y.b.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId)}i=!0}return i}))}cancelRecognition(e,t,i,r,n){const c=new s.a;if(c.setProperty(P.CancellationErrorCodePropertyName,g.a[r]),this.privTranslationRecognizer.canceled){const t=new l(e,i,n,r,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,t)}catch(e){}}if(this.privSuccessCallback){const e=new o(void 0,t,a.a.Canceled,void 0,void 0,void 0,n,void 0,c);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch(e){}}}fireEventForResult(e,t){let i,r;if(void 0!==e.Translation.Translations){i=new S;for(const t of e.Translation.Translations)i.set(t.Language,t.Text||t.DisplayText)}r=e instanceof b.a?e.Translation.TranslationStatus===n.a.Success?a.a.TranslatedSpeech:a.a.RecognizedSpeech:a.a.TranslatingSpeech;const s=e.Offset+this.privRequestSession.currentTurnAudioOffset,c=new o(i,this.privRequestSession.requestId,r,e.Text,e.Duration,s,e.Translation.FailureReason,JSON.stringify(e),t);return new h(c,s,this.privRequestSession.sessionId)}sendSynthesisAudio(e,t){const i=void 0===e?a.a.SynthesizingAudioCompleted:a.a.SynthesizingAudio,r=new p(i,e),n=new v(r,t);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,n)}catch(e){}}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return I}));class r{constructor(e,t){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.id=()=>this.privAudioNode.id(),this.privAudioNode=e,this.privBytesPerSecond=t}read(){if(this.privReplay&&0!==this.privBuffers.length){const e=this.privReplayOffset-this.privBufferStartOffset;let t=Math.round(e*this.privBytesPerSecond*1e-7);0!=t%2&&t++;let i=0;for(;i<this.privBuffers.length&&t>=this.privBuffers[i].chunk.buffer.byteLength;)t-=this.privBuffers[i++].chunk.buffer.byteLength;if(i<this.privBuffers.length){const e=this.privBuffers[i].chunk.buffer.slice(t);return this.privReplayOffset+=e.byteLength/this.privBytesPerSecond*1e7,i===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:e,isEnd:!1,timeReceived:this.privBuffers[i].chunk.timeReceived})}}return this.privAudioNode.read().then(e=>(e&&e.buffer&&(this.privBuffers.push(new n(e,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=e.buffer.byteLength),e))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&0!==this.privBuffers.length&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(e){if(void 0===this.privBuffers||0===this.privBuffers.length)return;this.privLastShrinkOffset=e;const t=e-this.privBufferStartOffset;let i=Math.round(t*this.privBytesPerSecond*1e-7),r=0;for(;r<this.privBuffers.length&&i>=this.privBuffers[r].chunk.buffer.byteLength;)i-=this.privBuffers[r++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(e-i/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(r)}findTimeAtOffset(e){if(e<this.privBufferStartOffset||void 0===this.privBuffers)return 0;for(const t of this.privBuffers){const i=t.byteOffset/this.privBytesPerSecond*1e7,r=i+t.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(e>=i&&e<=r)return t.chunk.timeReceived}return 0}}class n{constructor(e,t,i){this.chunk=e,this.serial=t,this.byteOffset=i}}var s=i(14),o=i(5),a=i(31);class c{}c.workerTimers=null,c.clearTimeout=e=>c.timers().clearTimeout(e),c.setTimeout=(e,t)=>c.timers().setTimeout(e,t),c.load=e=>{const t=new Map([[0,()=>{}]]),i=new Map,r=new Worker(e);r.addEventListener("message",({data:e})=>{if(c.isCallNotification(e)){const{params:{timerId:r}}=e,n=t.get(r);if("number"==typeof n){const e=i.get(n);if(void 0===e||e!==r)throw new Error("The timer is in an undefined state.")}else{if(void 0===n)throw new Error("The timer is in an undefined state.");n(),t.delete(r)}}else{if(!c.isClearResponse(e)){const{error:{message:t}}=e;throw new Error(t)}{const{id:r}=e,n=i.get(r);if(void 0===n)throw new Error("The timer is in an undefined state.");i.delete(r),t.delete(n)}}});return{clearTimeout:e=>{const n=Math.random();i.set(n,e),t.set(e,n),r.postMessage({id:n,method:"clear",params:{timerId:e}})},setTimeout:(e,i)=>{const n=Math.random();return t.set(n,e),r.postMessage({id:null,method:"set",params:{delay:i,now:performance.now(),timerId:n}}),n}}},c.loadWorkerTimers=()=>()=>{if(null!==c.workerTimers)return c.workerTimers;const e=new Blob(['!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error(\'There is no interval scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error(\'There is no timeout scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error(\'The given method "\'.concat(e.method,\'" is not supported\'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);'],{type:"application/javascript; charset=utf-8"}),t=URL.createObjectURL(e);return c.workerTimers=c.load(t),c.workerTimers.setTimeout(()=>URL.revokeObjectURL(t),0),c.workerTimers},c.timers=c.loadWorkerTimers(),c.isCallNotification=e=>void 0!==e.method&&"call"===e.method,c.isClearResponse=e=>null===e.error&&"number"==typeof e.id;var h=i(106),u=i(107),p=i(12),d=i(35),v=i(18),l=i(6),f=i(102),g=i(109),S=i(57),m=i(41),y=i(42),w=i(39),C=i(20),b=i(43),R=i(13),P=function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class I{constructor(e,t,i,r,n){if(this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.recognizeOverride=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendSpeechContext=e=>{const t=this.speechContext.toJSON();if(this.privRequestSession.onSpeechContext(),t)return e.send(new R.a(s.b.Text,"speech.context",this.privRequestSession.requestId,"application/json",t))},this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.sendSpeechServiceConfig=(e,t,i)=>{if(!0!==I.telemetryDataEnabled){const e={context:{system:JSON.parse(i).context.system}};i=JSON.stringify(e)}if("true"===this.privRecognizerConfig.parameters.getProperty("TranscriptionService_SingleChannel","false").toLowerCase()){const e=JSON.parse(i);e.context.DisableReferenceChannel="True",e.context.MicSpec="1_0_0",i=JSON.stringify(e)}if(i)return e.send(new R.a(s.b.Text,"speech.config",t.requestId,"application/json",i))},!e)throw new o.a("authentication");if(!t)throw new o.a("connectionFactory");if(!i)throw new o.a("audioSource");if(!r)throw new o.a("recognizerConfig");this.privMustReportEndOfStream=!1,this.privAuthentication=e,this.privConnectionFactory=t,this.privAudioSource=i,this.privRecognizerConfig=r,this.privIsDisposed=!1,this.privRecognizer=n,this.privRequestSession=new S.a(this.privAudioSource.id()),this.privConnectionEvents=new a.a,this.privServiceEvents=new a.a,this.privDynamicGrammar=new m.a,this.privSpeechContext=new y.a(this.privDynamicGrammar),this.privAgentConfig=new w.a,"undefined"!=typeof Blob&&"undefined"!=typeof Worker&&(this.privSetTimeout=c.setTimeout),this.connectionEvents.attach(e=>P(this,void 0,void 0,(function*(){if("ConnectionClosedEvent"===e.name){const t=e;(1003===t.statusCode||1007===t.statusCode||1002===t.statusCode||4e3===t.statusCode||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&(yield this.cancelRecognitionLocal(d.a.Error,1007===t.statusCode?v.a.BadRequestParameters:v.a.ConnectionFailure,t.reason+" websocket error code: "+t.statusCode))}})))}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(e){this.privRecognizerConfig.parameters.setProperty(l.a.ConversationTranslator_Token,e)}set authentication(e){this.privAuthentication=this.authentication}isDisposed(){return this.privIsDisposed}dispose(e){return P(this,void 0,void 0,(function*(){if(this.privIsDisposed=!0,this.privConnectionConfigurationPromise)try{const t=yield this.privConnectionConfigurationPromise;yield t.dispose(e)}catch(e){return}}))}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}recognize(e,t,i){return P(this,void 0,void 0,(function*(){if(void 0!==this.recognizeOverride)return this.recognizeOverride(e,t,i);this.privConnectionConfigurationPromise=null,this.privRecognizerConfig.recognitionMode=e,this.privSuccessCallback=t,this.privErrorCallback=i,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);const n=this.connectImpl();let s;try{const e=yield this.audioSource.attach(this.privRequestSession.audioNodeId),t=yield this.audioSource.format,i=yield this.audioSource.deviceInfo;this.privIsLiveAudio=i.type&&i.type===C.g.Microphones,s=new r(e,t.avgBytesPerSec),yield this.privRequestSession.onAudioSourceAttachCompleted(s,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:i}}catch(e){throw yield this.privRequestSession.onStopRecognizing(),e}try{yield n}catch(e){return void(yield this.cancelRecognitionLocal(d.a.Error,v.a.ConnectionFailure,e))}const o=new f.a(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,o);this.receiveMessage();this.sendAudio(s).catch(e=>P(this,void 0,void 0,(function*(){yield this.cancelRecognitionLocal(d.a.Error,v.a.RuntimeError,e)})))}))}stopRecognizing(){return P(this,void 0,void 0,(function*(){if(this.privRequestSession.isRecognizing)try{yield this.audioSource.turnOff(),yield this.sendFinalAudio(),yield this.privRequestSession.onStopRecognizing(),yield this.privRequestSession.turnCompletionPromise}finally{yield this.privRequestSession.dispose()}}))}connect(){return P(this,void 0,void 0,(function*(){return yield this.connectImpl(),Promise.resolve()}))}connectAsync(e,t){this.connectImpl().then(i=>{try{e&&e()}catch(e){t&&t(e)}},e=>{try{t&&t(e)}catch(e){}})}disconnect(){return P(this,void 0,void 0,(function*(){yield this.cancelRecognitionLocal(d.a.Error,v.a.NoError,"Disconnecting"),void 0!==this.disconnectOverride&&(yield this.disconnectOverride());try{yield(yield this.privConnectionPromise).dispose()}catch(e){}this.privConnectionPromise=null}))}sendMessage(e){}sendNetworkMessage(e,t){return P(this,void 0,void 0,(function*(){const i="string"==typeof t?s.b.Text:s.b.Binary,r="string"==typeof t?"application/json":"";return(yield this.fetchConnection()).send(new R.a(i,e,this.privRequestSession.requestId,r,t))}))}set activityTemplate(e){this.privActivityTemplate=e}get activityTemplate(){return this.privActivityTemplate}sendTelemetryData(){return P(this,void 0,void 0,(function*(){const e=this.privRequestSession.getTelemetry();if(!0!==I.telemetryDataEnabled||this.privIsDisposed||null===e)return;if(I.telemetryData)try{I.telemetryData(e)}catch(e){}const t=yield this.fetchConnection();yield t.send(new R.a(s.b.Text,"telemetry",this.privRequestSession.requestId,"application/json",e))}))}cancelRecognitionLocal(e,t,i){return P(this,void 0,void 0,(function*(){this.privRequestSession.isRecognizing&&(yield this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,e,t,i))}))}receiveMessage(){return P(this,void 0,void 0,(function*(){try{if(this.privIsDisposed)return;let e=yield this.fetchConnection();const t=yield e.read();if(void 0!==this.receiveMessageOverride)return this.receiveMessageOverride();if(!t)return this.privRequestSession.isRecognizing?this.receiveMessage():void 0;this.privServiceHasSentMessage=!0;const i=R.a.fromConnectionMessage(t);if(i.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(i.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":const t=b.a.fromJSON(i.textBody),r=new g.a(t.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,r);break;case"speech.enddetected":let n;n=i.textBody.length>0?i.textBody:"{ Offset: 0 }";const s=b.a.fromJSON(n);this.privRecognizerConfig.isContinuousRecognition&&this.privRequestSession.onServiceRecognized(s.Offset+this.privRequestSession.currentTurnAudioOffset);const o=new g.a(s.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,o);break;case"turn.end":yield this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,yield this.cancelRecognitionLocal(d.a.EndOfStream,v.a.NoError,void 0));const a=new f.a(this.privRequestSession.sessionId);if(yield this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)return void(this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,a));e=yield this.fetchConnection(),yield this.sendPrePayloadJSON(e);break;default:(yield this.processTypeSpecificMessages(i))||this.privServiceEvents&&this.serviceEvents.onEvent(new h.h(i.path.toLowerCase(),i.textBody))}return this.receiveMessage()}catch(e){return null}}))}sendPrePayloadJSON(e){return P(this,void 0,void 0,(function*(){if(void 0!==this.sendPrePayloadJSONOverride)return this.sendPrePayloadJSONOverride(e);yield this.sendSpeechContext(e),yield this.sendWaveHeader(e)}))}sendWaveHeader(e){return P(this,void 0,void 0,(function*(){const t=yield this.audioSource.format;return e.send(new R.a(s.b.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",t.header))}))}connectImpl(){return this.privConnectionPromise?this.privConnectionPromise.then(e=>e.state()===u.a.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise,e=>(this.privConnectionId=null,this.privConnectionPromise=null,this.privServiceHasSentMessage=!1,this.connectImpl())):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch(()=>{}),void 0!==this.postConnectImplOverride?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}fetchConnection(){return P(this,void 0,void 0,(function*(){return this.privConnectionConfigurationPromise?this.privConnectionConfigurationPromise.then(e=>e.state()===u.a.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=null,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise,e=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=null,this.privServiceHasSentMessage=!1,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),yield this.privConnectionConfigurationPromise)}))}sendAudio(e){return P(this,void 0,void 0,(function*(){const t=yield this.audioSource.format;let i=Date.now();const r=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),n=t.avgBytesPerSec/1e3*parseInt(r,10),o=this.privRequestSession.recogNumber,a=()=>P(this,void 0,void 0,(function*(){if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===o){const r=yield this.fetchConnection(),c=yield e.read();if(this.privRequestSession.isSpeechEnded)return;let h,u;if(!c||c.isEnd?(h=null,u=0):(h=c.buffer,this.privRequestSession.onAudioSent(h.byteLength),u=n>=this.privRequestSession.bytesSent?0:Math.max(0,i-Date.now())),0!==u&&(yield this.delay(u)),null!==h&&(i=Date.now()+1e3*h.byteLength/(2*t.avgBytesPerSec)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===o){if(r.send(new R.a(s.b.Binary,"audio",this.privRequestSession.requestId,null,h)).catch(()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch(()=>{})}),!(null==c?void 0:c.isEnd))return a();this.privIsLiveAudio||this.privRequestSession.onSpeechEnded()}}}));return a()}))}retryableConnect(){return P(this,void 0,void 0,(function*(){let e=!1;this.privAuthFetchEventId=Object(p.a)();const t=this.privRequestSession.sessionId;this.privConnectionId=void 0!==t?t:Object(p.a)(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let i=0,r="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){const t=e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId),n=yield t;yield this.privRequestSession.onAuthCompleted(!1);const s=this.privConnectionFactory.create(this.privRecognizerConfig,n,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(s.events),s.events.attach(e=>{this.connectionEvents.onEvent(e)});const o=yield s.open();if(200===o.statusCode)return yield this.privRequestSession.onConnectionEstablishCompleted(o.statusCode),Promise.resolve(s);1006===o.statusCode&&(e=!0),i=o.statusCode,r=o.reason,this.privRequestSession.onRetryConnection()}return yield this.privRequestSession.onConnectionEstablishCompleted(i,r),Promise.reject(`Unable to contact server. StatusCode: ${i}, ${this.privRecognizerConfig.parameters.getProperty(l.a.SpeechServiceConnection_Endpoint)} Reason: ${r}`)}))}delay(e){return new Promise((t,i)=>{this.privSetTimeout(t,e)})}writeBufferToConsole(e){let t="Buffer Size: ";if(null===e)t+="null";else{const i=new Uint8Array(e);t+=e.byteLength+"\r\n";for(let r=0;r<e.byteLength;r++)t+=i[r].toString(16).padStart(2,"0")+" "}console.info(t)}sendFinalAudio(){return P(this,void 0,void 0,(function*(){const e=yield this.fetchConnection();yield e.send(new R.a(s.b.Binary,"audio",this.privRequestSession.requestId,null,null))}))}configureConnection(){return P(this,void 0,void 0,(function*(){const e=yield this.connectImpl();return void 0!==this.configConnectionOverride?this.configConnectionOverride(e):(yield this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),yield this.sendPrePayloadJSON(e),e)}))}}I.telemetryDataEnabled=!0},function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));class r{static get requestOptions(){return r.privDefaultRequestOptions}static get configParams(){return r.privDefaultParams}static get restErrors(){return r.privRestErrors}}r.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4},r.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."},r.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"};var n,s=i(5),o=i(25),a=i(68),c=i.n(a),h=function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};!function(e){e.Get="GET",e.Post="POST",e.Delete="DELETE",e.File="file"}(n||(n={}));class u{constructor(e){if(!e)throw new s.a("configParams");this.privHeaders=e.headers,this.privIgnoreCache=e.ignoreCache}static extractHeaderValue(e,t){let i="";try{const r=t.trim().split(/[\r\n]+/),n={};r.forEach(e=>{const t=e.split(": "),i=t.shift().toLowerCase(),r=t.join(": ");n[i]=r}),i=n[e.toLowerCase()]}catch(e){}return i}set options(e){this.privHeaders=e.headers,this.privIgnoreCache=e.ignoreCache}setHeaders(e,t){this.privHeaders[e]=t}request(e,t,i={},r=null,s=null){const a=new o.a,u=e===n.File?"POST":e,p=(e,t={})=>{const i=e;return{data:JSON.stringify(t),headers:JSON.stringify(e.headers),json:t,ok:e.statusCode>=200&&e.statusCode<300,status:e.statusCode,statusText:t.error?t.error.message:i.statusText?i.statusText:i.statusMessage}},d=r=>{c()(t,u,this.privHeaders,200,201,202,204,400,401,402,403,404)(""===this.queryParams(i)?"":"?"+this.queryParams(i),r).then(t=>h(this,void 0,void 0,(function*(){if(e===n.Delete||204===t.statusCode)a.resolve(p(t));else try{const e=yield t.json();a.resolve(p(t,e))}catch(e){a.resolve(p(t))}}))).catch(e=>{a.reject(e)})};if(this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),e===n.File&&s){const e="multipart/form-data";this.privHeaders["content-type"]=e,this.privHeaders["Content-Type"]=e,"undefined"!=typeof Blob&&s instanceof Blob?(e=>{const t=new FileReader;return t.readAsArrayBuffer(e),new Promise(e=>{t.onloadend=()=>{e(t.result)}})})(s).then(e=>{d(e)}).catch(e=>{a.reject(e)}):d(s)}else e===n.Post&&r&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),d(r);return a.promise}withQuery(e,t={}){const i=this.queryParams(t);return i?e+(-1===e.indexOf("?")?"?":"&")+i:e}queryParams(e={}){return Object.keys(e).map(t=>encodeURIComponent(t)+"="+encodeURIComponent(e[t])).join("&")}}var p=i(6),d=i(22),v=i(9);class l{constructor(e){let t=e.parameters.getProperty(p.a.SpeechServiceConnection_Endpoint,void 0);if(!t){const i=e.parameters.getProperty(p.a.SpeechServiceConnection_Region,"westus"),r=d.a.getHostSuffix(i);t=e.parameters.getProperty(p.a.SpeechServiceConnection_Host,`https://${i}.tts.speech${r}`)}this.privUri=t+"/cognitiveservices/voices/list";const i=r.requestOptions;i.headers[r.configParams.subscriptionKey]=e.parameters.getProperty(p.a.SpeechServiceConnection_Key,void 0),this.privRestAdapter=new u(i)}getVoicesList(e){return this.privRestAdapter.setHeaders(v.a.ConnectionId,e),this.privRestAdapter.request(n.Get,this.privUri)}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var r=i(25),n=i(34),s=i(12),o=i(19),a=i(27),c=i(2);class h extends c.b{constructor(e,t,i=c.a.Info){super(e,i),this.privRequestId=t}get requestId(){return this.privRequestId}}class u extends h{constructor(e,t,i){super("SynthesisTriggeredEvent",e),this.privSessionAudioDestinationId=t,this.privTurnAudioDestinationId=i}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}}class p extends h{constructor(e,t){super("ConnectingToSynthesisServiceEvent",e),this.privAuthFetchEventId=t}get authFetchEventId(){return this.privAuthFetchEventId}}class d extends h{constructor(e,t){super("SynthesisStartedEvent",e),this.privAuthFetchEventId=t}get authFetchEventId(){return this.privAuthFetchEventId}}var v=function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class l{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.onPreConnectionStart=(e,t)=>{this.privAuthFetchEventId=e,this.onEvent(new p(this.privRequestId,this.privAuthFetchEventId))},this.onAuthCompleted=(e,t)=>{e&&this.onComplete()},this.onConnectionEstablishCompleted=(e,t)=>{if(200===e)return this.onEvent(new d(this.requestId,this.privAuthFetchEventId)),void(this.privBytesReceived=0);403===e&&this.onComplete()},this.onServiceResponseMessage=e=>{const t=JSON.parse(e);this.streamId=t.audio.streamId},this.onServiceTurnEndResponse=()=>{this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()},this.onServiceTurnStartResponse=()=>{this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new r.a},this.dispose=e=>{this.privIsDisposed||(this.privIsDisposed=!0)},this.onEvent=e=>{n.a.instance.onEvent(e)},this.onComplete=()=>{this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,void 0!==this.privTurnAudioDestination&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))},this.privRequestId=Object(s.a)(),this.privTurnDeferral=new r.a,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(e){this.privStreamId=e}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(e){this.privAudioOutputFormat=e}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get bytesReceived(){return this.privBytesReceived}getAllReceivedAudio(){return v(this,void 0,void 0,(function*(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(yield this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null}))}getAllReceivedAudioWithHeader(){return v(this,void 0,void 0,(function*(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){const e=yield this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=a.a.addHeader(e,this.audioOutputFormat),this.privReceivedAudioWithHeader}return this.getAllReceivedAudio()}))}startNewSynthesis(e,t,i,r){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=e,this.privRawText=t,this.privIsSSML=i,this.privAudioOutputStream=new o.b,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privPartialVisemeAnimation="",void 0!==r&&(this.privTurnAudioDestination=r,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new u(this.requestId,void 0,void 0===r?void 0:r.id()))}onAudioChunkReceived(e){this.isSynthesizing&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength,void 0!==this.privTurnAudioDestination&&this.privTurnAudioDestination.write(e))}onWordBoundaryEvent(e){this.updateTextOffset(e)}onVisemeMetadataReceived(e){void 0!==e.Data.AnimationChunk&&(this.privPartialVisemeAnimation+=e.Data.AnimationChunk)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){const e=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",e}updateTextOffset(e){this.privTextOffset>=0&&(this.privTextOffset=this.privRawText.indexOf(e,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+e.length),this.privIsSSML&&this.privRawText.indexOf("<",this.privTextOffset+1)>this.privRawText.indexOf(">",this.privTextOffset+1)&&this.updateTextOffset(e))}readAllAudioFromStream(){return v(this,void 0,void 0,(function*(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{yield this.privAudioOutputStream.read(this.privReceivedAudio)}catch(e){this.privReceivedAudio=new ArrayBuffer(0)}}}))}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var r=i(12),n=i(25),s=i(34),o=i(17),a=i(15),c=i(106);class h{constructor(e,t,i){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.onEvent=e=>{if(!this.privIsDisposed&&(e instanceof o.d&&e.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:e.eventTime,Name:"ListeningTrigger",Start:e.eventTime}),e instanceof a.f&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof a.e&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof a.a&&e.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof a.h&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof a.g&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Name:"Microphone",Start:this.privMicStartTime})),e instanceof o.a&&e.requestId===this.privRequestId&&(this.privConnectionId=e.sessionId),e instanceof c.g&&e.connectionId===this.privConnectionId&&(this.privConnectionStartTime=e.eventTime),e instanceof c.d&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof c.c&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Error:this.getConnectionError(e.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof c.e&&e.connectionId===this.privConnectionId&&e.message&&e.message.headers&&e.message.headers.path)){this.privReceivedMessages[e.message.headers.path]||(this.privReceivedMessages[e.message.headers.path]=new Array);const t=50;this.privReceivedMessages[e.message.headers.path].length<t&&this.privReceivedMessages[e.message.headers.path].push(e.networkReceivedTime)}},this.getTelemetry=()=>{const e=new Array;this.privListeningTriggerMetric&&e.push(this.privListeningTriggerMetric),this.privMicMetric&&e.push(this.privMicMetric),this.privConnectionEstablishMetric&&e.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&e.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&e.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});const t={Metrics:e,ReceivedMessages:this.privReceivedMessages},i=JSON.stringify(t);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],i},this.dispose=()=>{this.privIsDisposed=!0},this.getConnectionError=e=>{switch(e){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+e.toString()}},this.privRequestId=e,this.privAudioSourceId=t,this.privAudioNodeId=i,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(e){e>0&&this.privPhraseLatencies.push(Date.now()-e)}hypothesisReceived(e){e>0&&this.privHypothesisLatencies.push(Date.now()-e)}get hasTelemetry(){return 0!==Object.keys(this.privReceivedMessages).length||null!==this.privListeningTriggerMetric||null!==this.privMicMetric||null!==this.privConnectionEstablishMetric||0!==this.privPhraseLatencies.length||0!==this.privHypothesisLatencies.length}}var u=function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class p{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.onPreConnectionStart=(e,t)=>{this.privAuthFetchEventId=e,this.privSessionId=t,this.onEvent(new o.a(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))},this.onSpeechContext=()=>{this.privRequestId=Object(r.a)()},this.onServiceTurnStartResponse=()=>{this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new n.a},this.getTelemetry=()=>this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null,this.onEvent=e=>{this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(e),s.a.instance.onEvent(e)},this.privAudioSourceId=e,this.privRequestId=Object(r.a)(),this.privAudioNodeId=Object(r.a)(),this.privTurnDeferral=new n.a,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}listenForServiceTelemetry(e){this.privServiceTelemetryListener&&this.privDetachables.push(e.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new h(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new o.d(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onAudioSourceAttachCompleted(e,t,i){return u(this,void 0,void 0,(function*(){this.privAudioNode=e,this.privIsAudioNodeDetached=!1,t?yield this.onComplete():this.onEvent(new o.b(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}))}onAuthCompleted(e,t){return u(this,void 0,void 0,(function*(){e&&(yield this.onComplete())}))}onConnectionEstablishCompleted(e,t){return u(this,void 0,void 0,(function*(){if(200===e)return this.onEvent(new o.c(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,void(this.privBytesSent=0);403===e&&(yield this.onComplete())}))}onServiceTurnEndResponse(e){return u(this,void 0,void 0,(function*(){this.privTurnDeferral.resolve(),!e||this.isSpeechEnded?(yield this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())}))}onHypothesis(e){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(e)))}onPhraseRecognized(e){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(e)),this.onServiceRecognized(e)}onServiceRecognized(e){this.privLastRecoOffset=e,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(e),this.privConnectionAttempts=0}onAudioSent(e){this.privBytesSent+=e}onRetryConnection(){this.privConnectionAttempts++}dispose(e){var t;return u(this,void 0,void 0,(function*(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const e of this.privDetachables)yield e.detach();null===(t=this.privServiceTelemetryListener)||void 0===t||t.dispose(),this.privIsRecognizing=!1}}))}onStopRecognizing(){return u(this,void 0,void 0,(function*(){yield this.onComplete()}))}onSpeechEnded(){this.privIsSpeechEnded=!0}onComplete(){return u(this,void 0,void 0,(function*(){this.privIsRecognizing&&(this.privIsRecognizing=!1,yield this.detachAudioNode())}))}detachAudioNode(){return u(this,void 0,void 0,(function*(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&(yield this.privAudioNode.detach()))}))}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var r=i(6);class n{constructor(){this.privKeys=[],this.privValues=[]}getProperty(e,t){let i;i="string"==typeof e?e:r.a[e];for(let e=0;e<this.privKeys.length;e++)if(this.privKeys[e]===i)return this.privValues[e];return t}setProperty(e,t){let i;i="string"==typeof e?e:r.a[e];for(let e=0;e<this.privKeys.length;e++)if(this.privKeys[e]===i)return void(this.privValues[e]=t);this.privKeys.push(i),this.privValues.push(t)}clone(){const e=new n;for(let t=0;t<this.privKeys.length;t++)e.privKeys.push(this.privKeys[t]),e.privValues.push(this.privValues[t]);return e}mergeTo(e){this.privKeys.forEach(t=>{if(void 0===e.getProperty(t,void 0)){const i=this.getProperty(t);e.setProperty(t,i)}})}get keys(){return this.privKeys}}},function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return p})),i.d(t,"b",(function(){return f}));var r=i(20),n=i(34),s=i(31),o=i(101),a=i(15),c=i(12),h=i(0),u=function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class p{constructor(){}static createPushStream(e){return d.create(e)}static createPullStream(e,t){return l.create(e,t)}}class d extends p{static create(e){return new v(e)}}class v extends d{constructor(e){super(),this.onEvent=e=>{this.privEvents.onEvent(e),n.a.instance.onEvent(e)},this.privFormat=void 0===e?h.c.getDefaultInputFormat():e,this.privEvents=new s.a,this.privId=Object(c.a)(),this.privStream=new o.a(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(e){this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}get blob(){return this.attach("id").then(t=>{const i=[];let r=e.from("");const n=()=>t.read().then(t=>!t||t.isEnd?"undefined"!=typeof XMLHttpRequest&&"undefined"!=typeof Blob?Promise.resolve(new Blob(i)):Promise.resolve(e.from(r)):("undefined"!=typeof Blob?i.push(t.buffer):r=e.concat([r,this.toBuffer(t.buffer)]),n()));return n()})}turnOn(){this.onEvent(new a.b(this.privId)),this.onEvent(new a.d(this.privId))}attach(e){return u(this,void 0,void 0,(function*(){this.onEvent(new a.f(this.privId,e)),yield this.turnOn();const t=this.privStream;return this.onEvent(new a.e(this.privId,e)),{detach:()=>u(this,void 0,void 0,(function*(){return this.onEvent(new a.g(this.privId,e)),this.turnOff()})),id:()=>e,read:()=>t.read()}}))}detach(e){this.onEvent(new a.g(this.privId,e))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:r.f.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:r.g.Stream})}toBuffer(t){const i=e.alloc(t.byteLength),r=new Uint8Array(t);for(let e=0;e<i.length;++e)i[e]=r[e];return i}}class l extends p{constructor(){super()}static create(e,t){return new f(e,t)}}class f extends l{constructor(e,t){super(),this.onEvent=e=>{this.privEvents.onEvent(e),n.a.instance.onEvent(e)},this.privFormat=void 0===t?h.b.getDefaultInputFormat():t,this.privEvents=new s.a,this.privId=Object(c.a)(),this.privCallback=e,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}get blob(){return Promise.reject("Not implemented")}turnOn(){this.onEvent(new a.b(this.privId)),this.onEvent(new a.d(this.privId))}attach(e){return u(this,void 0,void 0,(function*(){return this.onEvent(new a.f(this.privId,e)),yield this.turnOn(),this.onEvent(new a.e(this.privId,e)),{detach:()=>(this.privCallback.close(),this.onEvent(new a.g(this.privId,e)),this.turnOff()),id:()=>e,read:()=>{let e,t=0;for(;t<this.privBufferSize;){const i=new ArrayBuffer(this.privBufferSize-t),r=this.privCallback.read(i);if(void 0===e)e=i;else{new Int8Array(e).set(new Int8Array(i),t)}if(0===r)break;t+=r}return Promise.resolve({buffer:e.slice(0,t),isEnd:this.privIsClosed||0===t,timeReceived:Date.now()})}}}))}detach(e){this.onEvent(new a.g(this.privId,e))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:r.f.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:r.g.Stream})}}}).call(this,i(36).Buffer)},function(e,t){},function(e,t,i){"use strict";(function(e,r){i.d(t,"a",(function(){return m}));var n=i(62),s=i(63),o=i.n(s),a=i(23),c=i(11),h=i(34),u=i(64),p=i.n(u),d=i(65),v=i.n(d),l=i(66),f=i.n(l),g=i(67),S=function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class m{constructor(t){t&&(this.privProxyInfo=t),m.privDiskCache||(m.privDiskCache=new v.a("microsoft-cognitiveservices-speech-sdk-cache",{supportBuffer:!0,location:void 0!==e&&e.env.SPEECH_OCSP_CACHE_ROOT?e.env.SPEECH_OCSP_CACHE_ROOT:void 0}))}static forceReinitDiskCache(){m.privDiskCache=void 0,m.privMemCache={}}GetAgent(e){const t=new p.a.Agent(this.CreateConnection);if(void 0!==this.privProxyInfo&&void 0!==this.privProxyInfo.HostName&&this.privProxyInfo.Port>0){t["privProxyInfo"]=this.privProxyInfo}return t}static GetProxyAgent(e){const t={host:e.HostName,port:e.Port};e.UserName?t.headers={"Proxy-Authentication":"Basic "+new r(e.UserName+":"+(void 0===e.Password)?"":e.Password).toString("base64")}:t.headers={},t.headers.requestOCSP="true";return new f.a(t)}static OCSPCheck(e,t){return S(this,void 0,void 0,(function*(){let i,r,n=!1;const s=yield e;s.cork();const o=s;return new Promise((e,h)=>{s.on("OCSPResponse",e=>{e&&(this.onEvent(new c.n),r=e)}),s.on("error",e=>{n||(n=!0,s.destroy(),h(e))}),o.on("secure",()=>S(this,void 0,void 0,(function*(){const c=o.getPeerCertificate(!0);try{const o=yield this.GetIssuer(c);i=a.request.generate(c.raw,o.raw);const h=i.id.toString("hex");if(!r){const e=yield m.GetResponseFromCache(h,i,t);r=e}yield this.VerifyOCSPResponse(r,i,t),s.uncork(),n=!0,e(s)}catch(e){s.destroy(),n=!0,h(e)}})))})}))}static GetIssuer(e){return e.issuerCertificate?Promise.resolve(e.issuerCertificate):new Promise((t,i)=>{new a.Agent({}).fetchIssuer(e,null,(e,r)=>{e?i(e):t(r)})})}static GetResponseFromCache(e,t,i){return S(this,void 0,void 0,(function*(){let r=m.privMemCache[e];if(r&&this.onEvent(new c.k(e)),!r)try{const t=yield m.privDiskCache.get(e);t.isCached&&(m.onEvent(new c.i(e)),m.StoreMemoryCacheEntry(e,t.value),r=t.value)}catch(e){r=null}if(!r)return r;try{const n=a.utils.parseResponse(r).value.tbsResponseData;if(n.responses.length<1)return void this.onEvent(new c.c(e,"Not enough data in cached response"));const s=n.responses[0].thisUpdate,o=n.responses[0].nextUpdate;if(o<Date.now()+this.testTimeOffset-6e4)this.onEvent(new c.a(e,o)),r=null;else{const r=Math.min(864e5,(o-s)/2);o-(Date.now()+this.testTimeOffset)<r?(this.onEvent(new c.b(e,s,o)),this.UpdateCache(t,i).catch(t=>{this.onEvent(new c.g(e,t.toString()))})):this.onEvent(new c.d(e,s,o))}}catch(t){this.onEvent(new c.c(e,t)),r=null}return r||this.onEvent(new c.e(e)),r}))}static VerifyOCSPResponse(e,t,i){return S(this,void 0,void 0,(function*(){let r=e;t.certID.toString("hex");return r||(r=yield m.GetOCSPResponse(t,i)),new Promise((n,s)=>{a.verify({request:t,response:r},(o,a)=>{o?(m.onEvent(new c.o(t.id.toString("hex"),o)),e?this.VerifyOCSPResponse(null,t,i).then(()=>{n()},e=>{s(e)}):s(o)):(e||m.StoreCacheEntry(t.id.toString("hex"),r),n())})})}))}static UpdateCache(e,t){return S(this,void 0,void 0,(function*(){const i=e.id.toString("hex");this.onEvent(new c.h(i));const r=yield this.GetOCSPResponse(e,t);this.StoreCacheEntry(i,r),this.onEvent(new c.f(e.id.toString("hex")))}))}static StoreCacheEntry(e,t){this.StoreMemoryCacheEntry(e,t),this.StoreDiskCacheEntry(e,t)}static StoreMemoryCacheEntry(e,t){this.privMemCache[e]=t,this.onEvent(new c.l(e))}static StoreDiskCacheEntry(e,t){this.privDiskCache.set(e,t).then(()=>{this.onEvent(new c.j(e))})}static GetOCSPResponse(e,t){let i={};if(t){const e=m.GetProxyAgent(t);i.agent=e}return new Promise((t,r)=>{a.utils.getAuthorityInfo(e.cert,"1.3.6.1.5.5.7.48.1",(n,s)=>{if(n)return void r(n);const h=o.a(s);h.path=h.pathname,i=Object.assign(Object.assign({},i),h),a.utils.getResponse(i,e.data,(i,n)=>{i?r(i):(this.onEvent(new c.m(e.certID.toString("hex"))),t(n))})})})}CreateConnection(t,i){const r=void 0!==e&&"0"!==e.env.NODE_TLS_REJECT_UNAUTHORIZED&&"0"!==e.env.SPEECH_CONDUCT_OCSP_CHECK&&i.secureEndpoint;let s;if(i=Object.assign(Object.assign({},i),{requestOCSP:!m.forceDisableOCSPStapling,servername:i.host}),this.privProxyInfo){const e=m.GetProxyAgent(this.privProxyInfo);s=new Promise((r,n)=>{e.callback(t,i,(e,t)=>{e?n(e):r(t)})})}else s=i.secureEndpoint?Promise.resolve(n.connect(i)):Promise.resolve(g.connect(i));return r?m.OCSPCheck(s,this.privProxyInfo):s}}m.testTimeOffset=0,m.forceDisableOCSPStapling=!1,m.privMemCache={},m.onEvent=e=>{h.a.instance.onEvent(e)}}).call(this,i(96),i(36).Buffer)},function(e,t){},function(e,t,i){"use strict";(function(t){var r=i(97),n=i(98),s=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,o=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,h=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,u=/^[a-zA-Z]:/;function p(e){return(e||"").toString().replace(s,"")}var d=[["#","hash"],["?","query"],function(e,t){return f(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],v={hash:1,query:1};function l(e){var i,r=("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{}).location||{},n={},s=typeof(e=e||r);if("blob:"===e.protocol)n=new S(unescape(e.pathname),{});else if("string"===s)for(i in n=new S(e,{}),v)delete n[i];else if("object"===s){for(i in e)i in v||(n[i]=e[i]);void 0===n.slashes&&(n.slashes=a.test(e.href))}return n}function f(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function g(e,t){e=(e=p(e)).replace(o,""),t=t||{};var i,r=h.exec(e),n=r[1]?r[1].toLowerCase():"",s=!!r[2],a=!!r[3],c=0;return s?a?(i=r[2]+r[3]+r[4],c=r[2].length+r[3].length):(i=r[2]+r[4],c=r[2].length):a?(i=r[3]+r[4],c=r[3].length):i=r[4],"file:"===n?c>=2&&(i=i.slice(2)):f(n)?i=r[4]:n?s&&(i=i.slice(2)):c>=2&&f(t.protocol)&&(i=r[4]),{protocol:n,slashes:s||f(n),slashesCount:c,rest:i}}function S(e,t,i){if(e=(e=p(e)).replace(o,""),!(this instanceof S))return new S(e,t,i);var s,a,c,h,v,m,y=d.slice(),w=typeof t,C=this,b=0;for("object"!==w&&"string"!==w&&(i=t,t=null),i&&"function"!=typeof i&&(i=n.parse),s=!(a=g(e||"",t=l(t))).protocol&&!a.slashes,C.slashes=a.slashes||s&&t.slashes,C.protocol=a.protocol||t.protocol||"",e=a.rest,("file:"===a.protocol&&(2!==a.slashesCount||u.test(e))||!a.slashes&&(a.protocol||a.slashesCount<2||!f(C.protocol)))&&(y[3]=[/(.*)/,"pathname"]);b<y.length;b++)"function"!=typeof(h=y[b])?(c=h[0],m=h[1],c!=c?C[m]=e:"string"==typeof c?~(v="@"===c?e.lastIndexOf(c):e.indexOf(c))&&("number"==typeof h[2]?(C[m]=e.slice(0,v),e=e.slice(v+h[2])):(C[m]=e.slice(v),e=e.slice(0,v))):(v=c.exec(e))&&(C[m]=v[1],e=e.slice(0,v.index)),C[m]=C[m]||s&&h[3]&&t[m]||"",h[4]&&(C[m]=C[m].toLowerCase())):e=h(e,C);i&&(C.query=i(C.query)),s&&t.slashes&&"/"!==C.pathname.charAt(0)&&(""!==C.pathname||""!==t.pathname)&&(C.pathname=function(e,t){if(""===e)return t;for(var i=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=i.length,n=i[r-1],s=!1,o=0;r--;)"."===i[r]?i.splice(r,1):".."===i[r]?(i.splice(r,1),o++):o&&(0===r&&(s=!0),i.splice(r,1),o--);return s&&i.unshift(""),"."!==n&&".."!==n||i.push(""),i.join("/")}(C.pathname,t.pathname)),"/"!==C.pathname.charAt(0)&&f(C.protocol)&&(C.pathname="/"+C.pathname),r(C.port,C.protocol)||(C.host=C.hostname,C.port=""),C.username=C.password="",C.auth&&(~(v=C.auth.indexOf(":"))?(C.username=C.auth.slice(0,v),C.username=encodeURIComponent(decodeURIComponent(C.username)),C.password=C.auth.slice(v+1),C.password=encodeURIComponent(decodeURIComponent(C.password))):C.username=encodeURIComponent(decodeURIComponent(C.auth)),C.auth=C.password?C.username+":"+C.password:C.username),C.origin="file:"!==C.protocol&&f(C.protocol)&&C.host?C.protocol+"//"+C.host:"null",C.href=C.toString()}S.prototype={set:function(e,t,i){var s=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(i||n.parse)(t)),s[e]=t;break;case"port":s[e]=t,r(t,s.protocol)?t&&(s.host=s.hostname+":"+t):(s.host=s.hostname,s[e]="");break;case"hostname":s[e]=t,s.port&&(t+=":"+s.port),s.host=t;break;case"host":s[e]=t,c.test(t)?(t=t.split(":"),s.port=t.pop(),s.hostname=t.join(":")):(s.hostname=t,s.port="");break;case"protocol":s.protocol=t.toLowerCase(),s.slashes=!i;break;case"pathname":case"hash":if(t){var o="pathname"===e?"/":"#";s[e]=t.charAt(0)!==o?o+t:t}else s[e]=t;break;case"username":case"password":s[e]=encodeURIComponent(t);break;case"auth":var a=t.indexOf(":");~a?(s.username=t.slice(0,a),s.username=encodeURIComponent(decodeURIComponent(s.username)),s.password=t.slice(a+1),s.password=encodeURIComponent(decodeURIComponent(s.password))):s.username=encodeURIComponent(decodeURIComponent(t))}for(var h=0;h<d.length;h++){var u=d[h];u[4]&&(s[u[1]]=s[u[1]].toLowerCase())}return s.auth=s.password?s.username+":"+s.password:s.username,s.origin="file:"!==s.protocol&&f(s.protocol)&&s.host?s.protocol+"//"+s.host:"null",s.href=s.toString(),s},toString:function(e){e&&"function"==typeof e||(e=n.stringify);var t,i=this,r=i.host,s=i.protocol;s&&":"!==s.charAt(s.length-1)&&(s+=":");var o=s+(i.protocol&&i.slashes||f(i.protocol)?"//":"");return i.username?(o+=i.username,i.password&&(o+=":"+i.password),o+="@"):i.password?(o+=":"+i.password,o+="@"):"file:"!==i.protocol&&f(i.protocol)&&!r&&"/"!==i.pathname&&(o+="@"),(":"===r[r.length-1]||c.test(i.hostname)&&!i.port)&&(r+=":"),o+=r+i.pathname,(t="object"==typeof i.query?e(i.query):i.query)&&(o+="?"!==t.charAt(0)?"?"+t:t),i.hash&&(o+=i.hash),o}},S.extractProtocol=g,S.location=l,S.trimLeft=p,S.qs=n,e.exports=S}).call(this,i(37))},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,i){"use strict";const r=i(99);class n extends Error{constructor(e,...t){let i;super(...t),Error.captureStackTrace&&Error.captureStackTrace(this,n),this.name="StatusError",this.message=e.statusMessage,this.statusCode=e.status,this.res=e,this.json=e.json.bind(e),this.text=e.text.bind(e),this.arrayBuffer=e.arrayBuffer.bind(e);Object.defineProperty(this,"responseBody",{get:()=>(i||(i=this.arrayBuffer()),i)}),this.headers={};for(const[t,i]of e.headers.entries())this.headers[t.toLowerCase()]=i}}e.exports=r((e,t,i,r,s)=>async(o,a,c={})=>{o=s+(o||"");let h=new URL(o);if(r||(r={}),h.username&&(r.Authorization="Basic "+btoa(h.username+":"+h.password),h=new URL(h.protocol+"//"+h.host+h.pathname+h.search)),"https:"!==h.protocol&&"http:"!==h.protocol)throw new Error("Unknown protocol, "+h.protocol);if(a)if(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||"string"==typeof a);else{if("object"!=typeof a)throw new Error("Unknown body type.");a=JSON.stringify(a),r["Content-Type"]="application/json"}c=new Headers({...r||{},...c});const u=await fetch(h,{method:t,headers:c,body:a});if(u.statusCode=u.status,!e.has(u.status))throw new n(u);return"json"===i?u.json():"buffer"===i?u.arrayBuffer():"string"===i?u.text():u})},function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var r=i(5),n=i(12),s=i(33),o=function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class a{constructor(e){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.read=()=>{if(this.privIsReadEnded)throw new r.b("Stream read has already finished");return this.privReaderQueue.dequeue().then(e=>o(this,void 0,void 0,(function*(){return(void 0===e||e.isEnd)&&(yield this.privReaderQueue.dispose("End of stream reached")),e})))},this.readEnded=()=>{this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new s.a)},this.throwIfClosed=()=>{if(this.privIsWriteEnded)throw new r.b("Stream closed")},this.privId=e||Object(n.a)(),this.privReaderQueue=new s.a}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(e){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(e)}catch(e){}}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var r=i(14),n=i(5),s=i(12);class o{constructor(e,t,i){if(this.privPayload=null,!t)throw new n.a("payload");if(e===r.b.Binary&&"ArrayBuffer"!==t.__proto__.constructor.name)throw new n.b("Payload must be ArrayBuffer");if(e===r.b.Text&&"string"!=typeof t)throw new n.b("Payload must be a string");this.privMessageType=e,this.privPayload=t,this.privId=i||Object(s.a)()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===r.b.Binary)throw new n.b("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===r.b.Text)throw new n.b("Not supported for text message");return this.privPayload}get id(){return this.privId}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var r=i(6);class n{constructor(e,t,i,r){this.privProxyHostName=e,this.privProxyPort=t,this.privProxyUserName=i,this.privProxyPassword=r}static fromParameters(e){return new n(e.getProperty(r.a.SpeechServiceConnection_ProxyHostName),parseInt(e.getProperty(r.a.SpeechServiceConnection_ProxyPort),10),e.getProperty(r.a.SpeechServiceConnection_ProxyUserName),e.getProperty(r.a.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(e){return this.fromParameters(e.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var r=i(5),n=i(12),s=i(9),o=i(107),a=i(25),c=i(33),h=i(34),u=i(108);class p{constructor(e,t){this.privStatusCode=e,this.privReason=t}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}}var d=i(106),v=i(70),l=i(14),f=i(31),g=i(60),S=i.n(g),m=i(61),y=function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class w{constructor(e,t,i,n,g,y){if(this.open=()=>{if(this.privConnectionState===o.a.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new a.a,this.privCertificateValidatedDeferral=new a.a,this.privConnectionState=o.a.Connecting;try{if("undefined"==typeof WebSocket||w.forceNpmWebSocket){const e={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression};this.privCertificateValidatedDeferral.resolve();const t=new m.a(this.proxyInfo);e.agent=t.GetAgent();let i=new URL(this.privUri).protocol;"wss:"===(null==i?void 0:i.toLocaleLowerCase())?i="https:":"ws:"===(null==i?void 0:i.toLocaleLowerCase())&&(i="http:"),e.agent.protocol=i,this.privWebsocketClient=new S.a(this.privUri,e)}else this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new c.a,this.privDisconnectDeferral=new a.a,this.privSendMessageQueue=new c.a,this.processSendQueue().catch(e=>{h.a.instance.onEvent(new u.a(e))})}catch(e){return this.privConnectionEstablishDeferral.resolve(new p(500,e)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new d.g(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=e=>{this.privCertificateValidatedDeferral.promise.then(()=>{this.privConnectionState=o.a.Connected,this.onEvent(new d.d(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new p(200,""))},e=>{this.privConnectionEstablishDeferral.reject(e)})},this.privWebsocketClient.onerror=e=>{this.onEvent(new d.b(this.privConnectionId,e.message,e.type)),this.privLastErrorReceived=e.message},this.privWebsocketClient.onclose=e=>{this.privConnectionState===o.a.Connecting?(this.privConnectionState=o.a.Disconnected,this.privConnectionEstablishDeferral.resolve(new p(e.code,e.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=o.a.Disconnected,this.privWebsocketClient=null,this.onEvent(new d.a(this.privConnectionId,e.code,e.reason))),this.onClose(e.code,e.reason).catch(e=>{h.a.instance.onEvent(new u.a(e))})},this.privWebsocketClient.onmessage=e=>{const t=(new Date).toISOString();if(this.privConnectionState===o.a.Connected){const i=new a.a;if(this.privReceivingMessageQueue.enqueueFromPromise(i.promise),e.data instanceof ArrayBuffer){const r=new v.a(l.b.Binary,e.data);this.privMessageFormatter.toConnectionMessage(r).then(e=>{this.onEvent(new d.e(this.privConnectionId,t,e)),i.resolve(e)},e=>{i.reject("Invalid binary message format. Error: "+e)})}else{const r=new v.a(l.b.Text,e.data);this.privMessageFormatter.toConnectionMessage(r).then(e=>{this.onEvent(new d.e(this.privConnectionId,t,e)),i.resolve(e)},e=>{i.reject("Invalid text message format. Error: "+e)})}}},this.privConnectionEstablishDeferral.promise},this.send=e=>{if(this.privConnectionState!==o.a.Connected)return Promise.reject(`Cannot send on connection that is in ${o.a[this.privConnectionState]} state`);const t=new a.a,i=new a.a;return this.privSendMessageQueue.enqueueFromPromise(i.promise),this.privMessageFormatter.fromConnectionMessage(e).then(r=>{i.resolve({Message:e,RawWebsocketMessage:r,sendStatusDeferral:t})},e=>{i.reject("Error formatting the message. "+e)}),t.promise},this.read=()=>this.privConnectionState!==o.a.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue(),this.close=e=>this.privWebsocketClient?(this.privConnectionState!==o.a.Disconnected&&this.privWebsocketClient.close(1e3,e||"Normal closure by client"),this.privDisconnectDeferral.promise):Promise.resolve(),this.sendRawMessage=e=>{try{return e?(this.onEvent(new d.f(this.privConnectionId,(new Date).toISOString(),e.Message)),this.isWebsocketOpen?(this.privWebsocketClient.send(e.RawWebsocketMessage.payload),Promise.resolve()):Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+e.Message.id+" "+(new Error).stack)):Promise.resolve()}catch(e){return Promise.reject("websocket send error: "+e)}},this.onEvent=e=>{this.privConnectionEvents.onEvent(e),h.a.instance.onEvent(e)},!e)throw new r.a("uri");if(!i)throw new r.a("messageFormatter");this.proxyInfo=n,this.privConnectionEvents=new f.a,this.privConnectionId=t,this.privMessageFormatter=i,this.privConnectionState=o.a.None,this.privUri=e,this.privHeaders=g,this.privEnableCompression=y,this.privHeaders[s.a.ConnectionId]=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}get events(){return this.privConnectionEvents}onClose(e,t){return y(this,void 0,void 0,(function*(){const i=`Connection closed. ${e}: ${t}`;this.privConnectionState=o.a.Disconnected,this.privDisconnectDeferral.resolve(),yield this.privReceivingMessageQueue.drainAndDispose(e=>{},i),yield this.privSendMessageQueue.drainAndDispose(e=>{e.sendStatusDeferral.reject(i)},i)}))}processSendQueue(){return y(this,void 0,void 0,(function*(){for(;;){const e=this.privSendMessageQueue.dequeue(),t=yield e;if(!t)return;try{yield this.sendRawMessage(t),t.sendStatusDeferral.resolve()}catch(e){t.sendStatusDeferral.reject(e)}}}))}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}}w.forceNpmWebSocket=!1;var C=function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class b{constructor(e,t,i,s,o,a=!1,c){if(this.privIsDisposed=!1,this.isDisposed=()=>this.privIsDisposed,this.state=()=>this.privConnectionMessageAdapter.state,this.open=()=>this.privConnectionMessageAdapter.open(),this.send=e=>this.privConnectionMessageAdapter.send(e),this.read=()=>this.privConnectionMessageAdapter.read(),!e)throw new r.a("uri");if(!s)throw new r.a("messageFormatter");this.privMessageFormatter=s;let h="",u=0;if(t)for(const i in t)if(i){h+=0===u&&-1===e.indexOf("?")?"?":"&";h+=`${i}=${encodeURIComponent(t[i])}`,u++}if(i)for(const t in i)if(t){h+=0===u&&-1===e.indexOf("?")?"?":"&";h+=`${t}=${encodeURIComponent(i[t])}`,u++}this.privUri=e+h,this.privId=c||Object(n.a)(),this.privConnectionMessageAdapter=new w(this.privUri,this.id,this.privMessageFormatter,o,i,a)}dispose(){return C(this,void 0,void 0,(function*(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&(yield this.privConnectionMessageAdapter.close())}))}get id(){return this.privId}get events(){return this.privConnectionMessageAdapter.events}}},,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";t.byteLength=function(e){var t=h(e),i=t[0],r=t[1];return 3*(i+r)/4-r},t.toByteArray=function(e){var t,i,r=h(e),o=r[0],a=r[1],c=new s(function(e,t,i){return 3*(t+i)/4-i}(0,o,a)),u=0,p=a>0?o-4:o;for(i=0;i<p;i+=4)t=n[e.charCodeAt(i)]<<18|n[e.charCodeAt(i+1)]<<12|n[e.charCodeAt(i+2)]<<6|n[e.charCodeAt(i+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;2===a&&(t=n[e.charCodeAt(i)]<<2|n[e.charCodeAt(i+1)]>>4,c[u++]=255&t);1===a&&(t=n[e.charCodeAt(i)]<<10|n[e.charCodeAt(i+1)]<<4|n[e.charCodeAt(i+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t);return c},t.fromByteArray=function(e){for(var t,i=e.length,n=i%3,s=[],o=0,a=i-n;o<a;o+=16383)s.push(u(e,o,o+16383>a?a:o+16383));1===n?(t=e[i-1],s.push(r[t>>2]+r[t<<4&63]+"==")):2===n&&(t=(e[i-2]<<8)+e[i-1],s.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return s.join("")};for(var r=[],n=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=o.length;a<c;++a)r[a]=o[a],n[o.charCodeAt(a)]=a;function h(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");return-1===i&&(i=t),[i,i===t?0:4-i%4]}function u(e,t,i){for(var n,s,o=[],a=t;a<i;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(r[(s=n)>>18&63]+r[s>>12&63]+r[s>>6&63]+r[63&s]);return o.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,i,r,n){var s,o,a=8*n-r-1,c=(1<<a)-1,h=c>>1,u=-7,p=i?n-1:0,d=i?-1:1,v=e[t+p];for(p+=d,s=v&(1<<-u)-1,v>>=-u,u+=a;u>0;s=256*s+e[t+p],p+=d,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=r;u>0;o=256*o+e[t+p],p+=d,u-=8);if(0===s)s=1-h;else{if(s===c)return o?NaN:1/0*(v?-1:1);o+=Math.pow(2,r),s-=h}return(v?-1:1)*o*Math.pow(2,s-r)},t.write=function(e,t,i,r,n,s){var o,a,c,h=8*s-n-1,u=(1<<h)-1,p=u>>1,d=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,v=r?0:s-1,l=r?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),(t+=o+p>=1?d/c:d*Math.pow(2,1-p))*c>=2&&(o++,c/=2),o+p>=u?(a=0,o=u):o+p>=1?(a=(t*c-1)*Math.pow(2,n),o+=p):(a=t*Math.pow(2,p-1)*Math.pow(2,n),o=0));n>=8;e[i+v]=255&a,v+=l,a/=256,n-=8);for(o=o<<n|a,h+=n;h>0;e[i+v]=255&o,v+=l,o/=256,h-=8);e[i+v-l]|=128*f}},function(e,t){var i={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==i.call(e)}},function(e,t){var i,r,n=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(i===setTimeout)return setTimeout(e,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:s}catch(e){i=s}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var c,h=[],u=!1,p=-1;function d(){u&&c&&(u=!1,c.length?h=c.concat(h):p=-1,h.length&&v())}function v(){if(!u){var e=a(d);u=!0;for(var t=h.length;t;){for(c=h,h=[];++p<t;)c&&c[p].run();p=-1,t=h.length}c=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function l(e,t){this.fun=e,this.array=t}function f(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];h.push(new l(e,t)),1!==h.length||u||a(v)},l.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=f,n.addListener=f,n.once=f,n.off=f,n.removeListener=f,n.removeAllListeners=f,n.emit=f,n.prependListener=f,n.prependOnceListener=f,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(e,t,i){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},function(e,t,i){"use strict";var r=Object.prototype.hasOwnProperty;function n(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function s(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var i,n,o=[];for(n in"string"!=typeof t&&(t="?"),e)if(r.call(e,n)){if((i=e[n])||null!=i&&!isNaN(i)||(i=""),n=s(n),i=s(i),null===n||null===i)continue;o.push(n+"="+i)}return o.length?t+o.join("&"):""},t.parse=function(e){for(var t,i=/([^=?#&]+)=?([^&]*)/g,r={};t=i.exec(e);){var s=n(t[1]),o=n(t[2]);null===s||null===o||s in r||(r[s]=o)}return r}},function(e,t,i){"use strict";const r=new Set(["json","buffer","string"]);e.exports=e=>(...t)=>{const i=new Set;let n,s,o,a="";return t.forEach(e=>{if("string"==typeof e)if(e.toUpperCase()===e){if(n){throw new Error(`Can't set method to ${e}, already set to ${n}.`)}n=e}else if(e.startsWith("http:")||e.startsWith("https:"))a=e;else{if(!r.has(e))throw new Error("Unknown encoding, "+e);s=e}else if("number"==typeof e)i.add(e);else{if("object"!=typeof e)throw new Error("Unknown type: "+typeof e);if(Array.isArray(e)||e instanceof Set)e.forEach(e=>i.add(e));else{if(o)throw new Error("Cannot set headers twice.");o=e}}}),n||(n="GET"),0===i.size&&i.add(200),e(i,n,s,o,a)}},function(e,t,i){"use strict";i.r(t),i.d(t,"speech_recognizeOnce",(function(){return we})),i.d(t,"close_recognizer",(function(){return Ce})),i.d(t,"speech_synthesizerOnce",(function(){return be})),i.d(t,"close_synthesizer",(function(){return Re}));var r,n,s=i(3),o=i(1),a=i(6),c=i(58);!function(e){e[e.Simple=0]="Simple",e[e.Detailed=1]="Detailed"}(r||(r={})),function(e){e[e.Masked=0]="Masked",e[e.Removed=1]="Removed",e[e.Raw=2]="Raw"}(n||(n={}));var h=i(4);class u{constructor(){}static fromSubscription(e,t){o.a.throwIfNullOrWhitespace(e,"subscriptionKey"),o.a.throwIfNullOrWhitespace(t,"region");const i=new p;return i.setProperty(a.a.SpeechServiceConnection_Region,t),i.setProperty(a.a.SpeechServiceConnection_IntentRegion,t),i.setProperty(a.a.SpeechServiceConnection_Key,e),i}static fromEndpoint(e,t){o.a.throwIfNull(e,"endpoint");const i=new p;return i.setProperty(a.a.SpeechServiceConnection_Endpoint,e.href),void 0!==t&&i.setProperty(a.a.SpeechServiceConnection_Key,t),i}static fromHost(e,t){o.a.throwIfNull(e,"hostName");const i=new p;return i.setProperty(a.a.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(""===e.port?"":":"+e.port)),void 0!==t&&i.setProperty(a.a.SpeechServiceConnection_Key,t),i}static fromAuthorizationToken(e,t){o.a.throwIfNull(e,"authorizationToken"),o.a.throwIfNullOrWhitespace(t,"region");const i=new p;return i.setProperty(a.a.SpeechServiceConnection_Region,t),i.setProperty(a.a.SpeechServiceConnection_IntentRegion,t),i.authorizationToken=e,i}close(){}}class p extends u{constructor(){super(),this.privProperties=new c.a,this.speechRecognitionLanguage="en-US",this.outputFormat=r.Simple}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(a.a.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(a.a.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(a.a.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(a.a.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.privProperties.setProperty(a.a.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return this.privProperties.getProperty(a.a.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(e){this.privProperties.setProperty(a.a.SpeechServiceConnection_RecoLanguage,e)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(a.a.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(e){this.privProperties.setProperty(a.a.SpeechServiceConnection_AutoDetectSourceLanguages,e)}get outputFormat(){return r[this.privProperties.getProperty(s.OutputFormatPropertyName,void 0)]}set outputFormat(e){this.privProperties.setProperty(s.OutputFormatPropertyName,r[e])}get endpointId(){return this.privProperties.getProperty(a.a.SpeechServiceConnection_EndpointId)}set endpointId(e){this.privProperties.setProperty(a.a.SpeechServiceConnection_EndpointId,e)}setProperty(e,t){o.a.throwIfNull(t,"value"),this.privProperties.setProperty(e,t)}getProperty(e,t){return this.privProperties.getProperty(e,t)}setProxy(e,t,i,r){this.setProperty(a.a[a.a.SpeechServiceConnection_ProxyHostName],e),this.setProperty(a.a[a.a.SpeechServiceConnection_ProxyPort],t),this.setProperty(a.a[a.a.SpeechServiceConnection_ProxyUserName],i),this.setProperty(a.a[a.a.SpeechServiceConnection_ProxyPassword],r)}setServiceProperty(e,t,i){const r=JSON.parse(this.privProperties.getProperty(s.ServicePropertiesPropertyName,"{}"));r[e]=t,this.privProperties.setProperty(s.ServicePropertiesPropertyName,JSON.stringify(r))}setProfanity(e){this.privProperties.setProperty(a.a.SpeechServiceResponse_ProfanityOption,n[e])}enableAudioLogging(){this.privProperties.setProperty(a.a.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(a.a.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privProperties.setProperty(s.ForceDictationPropertyName,"true")}clone(){const e=new p;return e.privProperties=this.privProperties.clone(),e}get speechSynthesisLanguage(){return this.privProperties.getProperty(a.a.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(e){this.privProperties.setProperty(a.a.SpeechServiceConnection_SynthLanguage,e)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(a.a.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(e){this.privProperties.setProperty(a.a.SpeechServiceConnection_SynthVoice,e)}get speechSynthesisOutputFormat(){return h.a[this.privProperties.getProperty(a.a.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(e){this.privProperties.setProperty(a.a.SpeechServiceConnection_SynthOutputFormat,h.a[e])}}class d extends u{constructor(){super()}static fromSubscription(e,t){o.a.throwIfNullOrWhitespace(e,"subscriptionKey"),o.a.throwIfNullOrWhitespace(t,"region");const i=new v;return i.properties.setProperty(a.a.SpeechServiceConnection_Key,e),i.properties.setProperty(a.a.SpeechServiceConnection_Region,t),i}static fromAuthorizationToken(e,t){o.a.throwIfNullOrWhitespace(e,"authorizationToken"),o.a.throwIfNullOrWhitespace(t,"region");const i=new v;return i.properties.setProperty(a.a.SpeechServiceAuthorization_Token,e),i.properties.setProperty(a.a.SpeechServiceConnection_Region,t),i}static fromHost(e,t){o.a.throwIfNull(e,"hostName");const i=new v;return i.setProperty(a.a.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(""===e.port?"":":"+e.port)),void 0!==t&&i.setProperty(a.a.SpeechServiceConnection_Key,t),i}static fromEndpoint(e,t){o.a.throwIfNull(e,"endpoint"),o.a.throwIfNull(t,"subscriptionKey");const i=new v;return i.properties.setProperty(a.a.SpeechServiceConnection_Endpoint,e.href),i.properties.setProperty(a.a.SpeechServiceConnection_Key,t),i}}class v extends d{constructor(){super(),this.privSpeechProperties=new c.a,this.outputFormat=r.Simple}set authorizationToken(e){o.a.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(a.a.SpeechServiceAuthorization_Token,e)}set speechRecognitionLanguage(e){o.a.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(a.a.SpeechServiceConnection_RecoLanguage,e)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(a.a[a.a.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(a.a[a.a.SpeechServiceConnection_Key])}get outputFormat(){return r[this.privSpeechProperties.getProperty(s.OutputFormatPropertyName,void 0)]}set outputFormat(e){this.privSpeechProperties.setProperty(s.OutputFormatPropertyName,r[e])}get endpointId(){return this.privSpeechProperties.getProperty(a.a.SpeechServiceConnection_EndpointId)}set endpointId(e){this.privSpeechProperties.setProperty(a.a.SpeechServiceConnection_EndpointId,e)}addTargetLanguage(e){o.a.throwIfNullOrWhitespace(e,"value");const t=this.targetLanguages;t.push(e),this.privSpeechProperties.setProperty(a.a.SpeechServiceConnection_TranslationToLanguages,t.join(","))}get targetLanguages(){return void 0!==this.privSpeechProperties.getProperty(a.a.SpeechServiceConnection_TranslationToLanguages,void 0)?this.privSpeechProperties.getProperty(a.a.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(a.a[a.a.SpeechServiceConnection_TranslationVoice])}set voiceName(e){o.a.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(a.a.SpeechServiceConnection_TranslationVoice,e)}get region(){return this.privSpeechProperties.getProperty(a.a.SpeechServiceConnection_Region)}setProxy(e,t,i,r){this.setProperty(a.a[a.a.SpeechServiceConnection_ProxyHostName],e),this.setProperty(a.a[a.a.SpeechServiceConnection_ProxyPort],t),this.setProperty(a.a[a.a.SpeechServiceConnection_ProxyUserName],i),this.setProperty(a.a[a.a.SpeechServiceConnection_ProxyPassword],r)}getProperty(e,t){return this.privSpeechProperties.getProperty(e,t)}setProperty(e,t){this.privSpeechProperties.setProperty(e,t)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(e,t,i){const r=JSON.parse(this.privSpeechProperties.getProperty(s.ServicePropertiesPropertyName,"{}"));r[e]=t,this.privSpeechProperties.setProperty(s.ServicePropertiesPropertyName,JSON.stringify(r))}setProfanity(e){this.privSpeechProperties.setProperty(a.a.SpeechServiceResponse_ProfanityOption,n[e])}enableAudioLogging(){this.privSpeechProperties.setProperty(a.a.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(a.a.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(s.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(a.a.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(e){this.privSpeechProperties.setProperty(a.a.SpeechServiceConnection_SynthLanguage,e)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(a.a.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(e){this.privSpeechProperties.setProperty(a.a.SpeechServiceConnection_SynthVoice,e)}get speechSynthesisOutputFormat(){return h.a[this.privSpeechProperties.getProperty(a.a.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(e){this.privSpeechProperties.setProperty(a.a.SpeechServiceConnection_SynthOutputFormat,h.a[e])}}class l{constructor(e,t){this.encode=e=>{const t=this.downSampleAudioFrame(e,this.privActualSampleRate,this.privDesiredSampleRate);if(!t)return null;const i=2*t.length,r=new ArrayBuffer(i),n=new DataView(r);return this.floatTo16BitPCM(n,0,t),r},this.setString=(e,t,i)=>{for(let r=0;r<i.length;r++)e.setUint8(t+r,i.charCodeAt(r))},this.floatTo16BitPCM=(e,t,i)=>{for(let r=0;r<i.length;r++,t+=2){const n=Math.max(-1,Math.min(1,i[r]));e.setInt16(t,n<0?32768*n:32767*n,!0)}},this.downSampleAudioFrame=(e,t,i)=>{if(!e)return null;if(i===t||i>t)return e;const r=t/i,n=Math.round(e.length/r),s=new Float32Array(n);let o=0,a=0;for(;a<n;){const t=Math.round((a+1)*r);let i=0,n=0;for(;o<t&&o<e.length;)i+=e[o++],n++;s[a++]=i/n}return s},this.privActualSampleRate=e,this.privDesiredSampleRate=t}}class f{constructor(e){this.record=(e,t,i)=>{const r=new l(e.sampleRate,16e3);let n=!0;const s=e.createMediaStreamSource(t);if(!this.privSpeechProcessorScript){const e=new Blob(["class SP extends AudioWorkletProcessor {\n                constructor(options) {\n                  super(options);\n                }\n                process(inputs, outputs) {\n                  const input = inputs[0];\n                  const output = [];\n                  for (let channel = 0; channel < input.length; channel += 1) {\n                    output[channel] = input[channel];\n                  }\n                  this.port.postMessage(output[0]);\n                  return true;\n                }\n              }\n              registerProcessor('speech-processor', SP);"],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(e)}const o=()=>{const o=(()=>{let t=0;try{return e.createScriptProcessor(t,1,1)}catch(i){t=2048;let r=e.sampleRate;for(;t<16384&&r>=32e3;)t<<=1,r>>=1;return e.createScriptProcessor(t,1,1)}})();o.onaudioprocess=e=>{const t=e.inputBuffer.getChannelData(0);if(i&&!i.isClosed){const e=r.encode(t);e&&(i.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()}),n=!1)}},s.connect(o),o.connect(e.destination),this.privMediaResources={scriptProcessorNode:o,source:s,stream:t}};if(this.privSpeechProcessorScript&&e.audioWorklet)e.audioWorklet.addModule(this.privSpeechProcessorScript).then(()=>{const o=new AudioWorkletNode(e,"speech-processor");o.port.onmessage=e=>{const t=e.data;if(i&&!i.isClosed){const e=r.encode(t);e&&(i.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()}),n=!1)}},s.connect(o),o.connect(e.destination),this.privMediaResources={scriptProcessorNode:o,source:s,stream:t}}).catch(()=>{o()});else try{o()}catch(e){throw new Error("Unable to start audio worklet node for PCMRecorder: "+e)}},this.releaseMediaResources=e=>{this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(e.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach(e=>e.stop()),this.privMediaResources.source=null))},this.privStopInputOnRelease=e}setWorkletUrl(e){this.privSpeechProcessorScript=e}}var g=i(20),S=i(25),m=i(15),y=i(101),w=i(34),C=i(12),b=i(31),R=i(0),P=function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class I{constructor(e,t,i,r){this.privRecorder=e,this.deviceId=t,this.privStreams={},this.turnOn=()=>{if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new S.a;try{this.createAudioContext()}catch(e){if(e instanceof Error){const t=e;this.privInitializeDeferral.reject(t.name+": "+t.message)}else this.privInitializeDeferral.reject(e);return this.privInitializeDeferral.promise}const e=window.navigator;let t=e.getUserMedia||e.webkitGetUserMedia||e.mozGetUserMedia||e.msGetUserMedia;if(e.mediaDevices&&(t=(t,i,r)=>{e.mediaDevices.getUserMedia(t).then(i).catch(r)}),t){const e=()=>{this.onEvent(new m.b(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new m.d(this.privId)),this.privInitializeDeferral.resolve()):t({audio:!this.deviceId||{deviceId:this.deviceId},video:!1},e=>{this.privMediaStream=e,this.onEvent(new m.d(this.privId)),this.privInitializeDeferral.resolve()},e=>{const t="Error occurred during microphone initialization: "+e;this.privInitializeDeferral.reject(t),this.onEvent(new m.a(this.privId,t))})};"suspended"===this.privContext.state?this.privContext.resume().then(e).catch(e=>{this.privInitializeDeferral.reject("Failed to initialize audio context: "+e)}):e()}else{const e="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(e),this.onEvent(new m.a(e,""))}return this.privInitializeDeferral.promise},this.id=()=>this.privId,this.attach=e=>(this.onEvent(new m.f(this.privId,e)),this.listen(e).then(t=>(this.onEvent(new m.e(this.privId,e)),{detach:()=>P(this,void 0,void 0,(function*(){return t.readEnded(),delete this.privStreams[e],this.onEvent(new m.g(this.privId,e)),this.turnOff()})),id:()=>e,read:()=>t.read()}))),this.detach=e=>{e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new m.g(this.privId,e)))},this.listen=e=>P(this,void 0,void 0,(function*(){yield this.turnOn();const t=new y.a(this.privOutputChunkSize,e);this.privStreams[e]=t;try{this.privRecorder.record(this.privContext,this.privMediaStream,t)}catch(t){throw this.onEvent(new m.h(this.privId,e,t)),t}return t})),this.onEvent=e=>{this.privEvents.onEvent(e),w.a.instance.onEvent(e)},this.createAudioContext=()=>{this.privContext||(this.privContext=R.c.getAudioContext(I.AUDIOFORMAT.samplesPerSec))},this.privOutputChunkSize=I.AUDIOFORMAT.avgBytesPerSec/10,this.privId=i||Object(C.a)(),this.privEvents=new b.a,this.privMediaStream=r||null,this.privIsClosing=!1}get format(){return Promise.resolve(I.AUDIOFORMAT)}get blob(){return Promise.reject("Not implemented for Mic input")}turnOff(){return P(this,void 0,void 0,(function*(){for(const e in this.privStreams)if(e){const t=this.privStreams[e];t&&t.close()}this.onEvent(new m.c(this.privId)),this.privInitializeDeferral&&(yield this.privInitializeDeferral,this.privInitializeDeferral=null),yield this.destroyAudioContext()}))}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then(e=>({bitspersample:I.AUDIOFORMAT.bitsPerSample,channelcount:I.AUDIOFORMAT.channels,connectivity:g.f.Unknown,manufacturer:"Speech SDK",model:e,samplerate:I.AUDIOFORMAT.samplesPerSec,type:g.g.Microphones}))}setProperty(e,t){if("MICROPHONE-WorkletSourceUrl"!==e)throw new Error("Property '"+e+"' is not supported on Microphone.");this.privRecorder.setWorkletUrl(t)}getMicrophoneLabel(){if(void 0!==this.privMicrophoneLabel)return Promise.resolve(this.privMicrophoneLabel);if(void 0===this.privMediaStream||!this.privMediaStream.active)return Promise.resolve("microphone");this.privMicrophoneLabel="microphone";const e=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(void 0===e)return Promise.resolve(this.privMicrophoneLabel);const t=new S.a;return navigator.mediaDevices.enumerateDevices().then(i=>{for(const t of i)if(t.deviceId===e){this.privMicrophoneLabel=t.label;break}t.resolve(this.privMicrophoneLabel)},()=>t.resolve(this.privMicrophoneLabel)),t.promise}destroyAudioContext(){return P(this,void 0,void 0,(function*(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let e=!1;"close"in this.privContext&&(e=!0),e?this.privIsClosing||(this.privIsClosing=!0,yield this.privContext.close(),this.privContext=null,this.privIsClosing=!1):null!==this.privContext&&"running"===this.privContext.state&&(yield this.privContext.suspend())}))}}I.AUDIOFORMAT=R.b.getDefaultInputFormat();var A=function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class E{constructor(e,t,i){this.privStreams={},this.privHeaderEnd=44,this.turnOn=()=>{if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){const e=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new m.a(e,"")),Promise.reject(e)}this.onEvent(new m.b(this.privId)),this.onEvent(new m.d(this.privId))},this.id=()=>this.privId,this.attach=e=>A(this,void 0,void 0,(function*(){this.onEvent(new m.f(this.privId,e));const t=yield this.upload(e);return this.onEvent(new m.e(this.privId,e)),Promise.resolve({detach:()=>A(this,void 0,void 0,(function*(){t.readEnded(),delete this.privStreams[e],this.onEvent(new m.g(this.privId,e)),yield this.turnOff()})),id:()=>e,read:()=>t.read()})})),this.detach=e=>{e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new m.g(this.privId,e)))},this.turnOff=()=>{for(const e in this.privStreams)if(e){const t=this.privStreams[e];t&&!t.isClosed&&t.close()}return this.onEvent(new m.c(this.privId)),Promise.resolve()},this.onEvent=e=>{this.privEvents.onEvent(e),w.a.instance.onEvent(e)},this.privId=i||Object(C.a)(),this.privEvents=new b.a,this.privSource=e,"undefined"!=typeof window&&"undefined"!=typeof Blob&&this.privSource instanceof Blob?this.privFilename=e.name:this.privFilename=t||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}get blob(){return Promise.resolve(this.privSource)}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then(e=>Promise.resolve({bitspersample:e.bitsPerSample,channelcount:e.channels,connectivity:g.f.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:e.samplesPerSec,type:g.g.File}))}readHeader(){const e=this.privSource.slice(0,512),t=new S.a,i=e=>{const i=new DataView(e),r=e=>String.fromCharCode(i.getUint8(e),i.getUint8(e+1),i.getUint8(e+2),i.getUint8(e+3));if("RIFF"!==r(0))return void t.reject("Invalid WAV header in file, RIFF was not found");if("WAVE"!==r(8)||"fmt "!==r(12))return void t.reject("Invalid WAV header in file, WAVEfmt was not found");const n=i.getInt32(16,!0),s=i.getUint16(22,!0),o=i.getUint32(24,!0),a=i.getUint16(34,!0);let c=36+Math.max(n-16,0);for(;"data"!==r(c);c+=2)if(c>504)return void t.reject("Invalid WAV header in file, data block was not found");this.privHeaderEnd=c+8,t.resolve(R.b.getWaveFormatPCM(o,a,s))};if("undefined"!=typeof window&&"undefined"!=typeof Blob&&e instanceof Blob){const t=new FileReader;t.onload=e=>{const t=e.target.result;i(t)},t.readAsArrayBuffer(e)}else{const t=e;i(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength))}return t.promise}upload(e){return A(this,void 0,void 0,(function*(){const t=t=>{const i=`Error occurred while processing '${this.privFilename}'. ${t}`;throw this.onEvent(new m.h(this.privId,e,i)),new Error(i)};try{yield this.turnOn();const i=yield this.privAudioFormatPromise,r=new y.a(i.avgBytesPerSec/10,e);this.privStreams[e]=r;const n=this.privSource.slice(this.privHeaderEnd),s=e=>{r.isClosed||(r.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()}),r.close())};if("undefined"!=typeof window&&"undefined"!=typeof Blob&&n instanceof Blob){const e=new FileReader;e.onerror=e=>{t(e.toString())},e.onload=e=>{const t=e.target.result;s(t)},e.readAsArrayBuffer(n)}else{const e=n;s(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength))}return r}catch(e){t(e)}}))}}var T=i(59),O=i(27),M=i(108),D=i(19),k=function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const z={[R.a.PCM]:"audio/wav",[R.a.MuLaw]:"audio/x-wav",[R.a.MP3]:"audio/mpeg",[R.a.OGG_OPUS]:"audio/ogg",[R.a.WEBM_OPUS]:"audio/webm; codecs=opus",[R.a.ALaw]:"audio/x-wav",[R.a.FLAC]:"audio/flac"};class N{constructor(e){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=e||Object(C.a)(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(e,t,i){void 0!==this.privAudioBuffer?(this.privAudioBuffer.push(e),this.updateSourceBuffer().then(()=>{t&&t()},e=>{i&&i(e)})):void 0!==this.privAudioOutputStream&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength)}close(e,t){if(this.privIsClosed=!0,void 0!==this.privSourceBuffer)this.handleSourceBufferUpdateEnd().then(()=>{e&&e()},e=>{t&&t(e)});else if(void 0!==this.privAudioOutputStream)if(this.privFormat.formatTag!==R.a.PCM&&this.privFormat.formatTag!==R.a.MuLaw&&this.privFormat.formatTag!==R.a.ALaw||!1!==this.privFormat.hasHeader){let i=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(i).then(r=>{i=O.a.addHeader(i,this.privFormat);const n=new Blob([i],{type:z[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(n),this.notifyPlayback().then(()=>{e&&e()},e=>{t&&t(e)})},e=>{t&&t(e)})}else console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else this.onAudioEnd&&this.onAudioEnd(this)}set format(e){if("undefined"!=typeof AudioContext||void 0!==window.webkitAudioContext){this.privFormat=e;const t=z[this.privFormat.formatTag];void 0===t?console.warn(`Unknown mimeType for format ${R.a[this.privFormat.formatTag]}; playback is not supported.`):"undefined"!=typeof MediaSource&&MediaSource.isTypeSupported(t)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=e=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=1800,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(t),this.privSourceBuffer.onupdate=e=>{this.updateSourceBuffer().catch(e=>{w.a.instance.onEvent(new M.a(e))})},this.privSourceBuffer.onupdateend=e=>{this.handleSourceBufferUpdateEnd().catch(e=>{w.a.instance.onEvent(new M.a(e))})},this.privSourceBuffer.onupdatestart=e=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch(e=>{w.a.instance.onEvent(new M.a(e))})):(console.warn(`Format ${R.a[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new D.b,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){return this.privAudio.volume}set volume(e){this.privAudio.volume=e}mute(){this.privAudio.muted=!0}unmute(){this.privAudio.muted=!1}get isClosed(){return this.privIsClosed}get currentTime(){return void 0!==this.privAudio?this.privAudio.currentTime:-1}pause(){this.privIsPaused||void 0===this.privAudio||(this.privAudio.pause(),this.privIsPaused=!0)}resume(e,t){this.privIsPaused&&void 0!==this.privAudio&&(this.privAudio.play().then(()=>{e&&e()},e=>{t&&t(e)}),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}updateSourceBuffer(){return k(this,void 0,void 0,(function*(){if(void 0!==this.privAudioBuffer&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;const e=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(e)}catch(t){return this.privAudioBuffer.unshift(e),void console.log("buffer filled, pausing addition of binaries until space is made")}yield this.notifyPlayback()}else this.canEndStream()&&(yield this.handleSourceBufferUpdateEnd())}))}handleSourceBufferUpdateEnd(){return k(this,void 0,void 0,(function*(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),yield this.notifyPlayback())}))}notifyPlayback(){return k(this,void 0,void 0,(function*(){this.privPlaybackStarted||void 0===this.privAudio||(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||(yield this.privAudio.play()))}))}canEndStream(){return this.isClosed&&void 0!==this.privSourceBuffer&&0===this.privAudioBuffer.length&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&"open"===this.privMediaSource.readyState}sourceBufferAvailable(){return void 0!==this.privSourceBuffer&&!this.privSourceBuffer.updating}}class x{}var B=i(24);class L{constructor(e){this.id=()=>this.privId,o.a.throwIfNullOrUndefined(B.openSync,"\nFile System access not available, please use Push or PullAudioOutputStream"),this.privFd=B.openSync(e,"w")}set format(e){o.a.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=e;let t=0;this.privAudioFormat.hasHeader&&(t=this.privAudioFormat.header.byteLength),void 0!==this.privFd&&(this.privWriteStream=B.createWriteStream("",{fd:this.privFd,start:t,autoClose:!1}))}write(e){o.a.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),void 0!==this.privWriteStream&&this.privWriteStream.write(new Uint8Array(e.slice(0)))}close(){void 0!==this.privFd&&(this.privWriteStream.on("finish",()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),B.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),B.closeSync(this.privFd),this.privFd=void 0}),this.privWriteStream.end())}}class _{static fromDefaultMicrophoneInput(){const e=new f(!0);return new F(new I(e))}static fromMicrophoneInput(e){const t=new f(!0);return new F(new I(t,e))}static fromWavFileInput(e,t="unnamedBuffer.wav"){return new F(new E(e,t))}static fromStreamInput(e){if(e instanceof class{})return new F(new T.b(e));if(e instanceof T.a)return new F(e);if("undefined"!=typeof MediaStream&&e instanceof MediaStream){const t=new f(!1);return new F(new I(t,null,null,e))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new U(new N)}static fromSpeakerOutput(e){if(void 0===e)return _.fromDefaultSpeakerOutput();if(e instanceof N)return new U(e);throw new Error("Not Supported Type")}static fromAudioFileOutput(e){return new U(new L(e))}static fromStreamOutput(e){if(e instanceof x)return new U(new D.d(e));if(e instanceof D.c)return new U(e);if(e instanceof D.a)return new U(e);throw new Error("Not Supported Type")}}class F extends _{constructor(e){super(),this.privSource=e}get format(){return this.privSource.format}close(e,t){this.privSource.turnOff().then(()=>{e&&e()},e=>{t&&t(e)})}id(){return this.privSource.id()}get blob(){return this.privSource.blob}turnOn(){return this.privSource.turnOn()}attach(e){return this.privSource.attach(e)}detach(e){return this.privSource.detach(e)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(e,t){if(o.a.throwIfNull(t,"value"),void 0===this.privSource.setProperty)throw new Error("This AudioConfig instance does not support setting properties.");this.privSource.setProperty(e,t)}getProperty(e,t){if(void 0!==this.privSource.getProperty)return this.privSource.getProperty(e,t);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}class U extends _{constructor(e){super(),this.privDestination=e}set format(e){this.privDestination.format=e}write(e){this.privDestination.write(e)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(e,t){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(e,t){throw new Error("This AudioConfig instance does not support getting properties.")}}var q=i(46),K=i(53),H=i(54),j=i(9),W=i(14);class V{constructor(e){this.privConnectionMessage=e,this.privProperties=new c.a,this.privConnectionMessage.headers[j.a.ConnectionId]&&this.privProperties.setProperty(a.a.Speech_SessionId,this.privConnectionMessage.headers[j.a.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach((e,t,i)=>{this.privProperties.setProperty(e,this.privConnectionMessage.headers[e])})}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find(e=>e.toLowerCase()==="path".toLowerCase())]}get isTextMessage(){return this.privConnectionMessage.messageType===W.b.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===W.b.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}}var G=i(102);class J extends G.a{}class Y{constructor(e){this.privConnectionMessage=e}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}}class $ extends G.a{constructor(e,t,i){super(i),this.privJsonResult=e,this.privEventName=t}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}}class Q{static fromRecognizer(e){const t=e.internalData,i=new Q;return i.privInternalData=t,i.setupEvents(),i}static fromSynthesizer(e){const t=e.internalData,i=new Q;return i.privInternalData=t,i.setupEvents(),i}openConnection(e,t){Object(S.b)(this.privInternalData.connect(),e,t)}closeConnection(e,t){if(this.privInternalData instanceof O.a)throw new Error("Disconnecting a synthesizer's connection is currently not supported");Object(S.b)(this.privInternalData.disconnect(),e,t)}setMessageProperty(e,t,i){if(o.a.throwIfNullOrWhitespace(t,"propertyName"),this.privInternalData instanceof H.a){if("speech.context"!==e.toLowerCase())throw new Error("Only speech.context message property sets are currently supported for recognizer");this.privInternalData.speechContext.setSection(t,i)}else if(this.privInternalData instanceof O.a){if("synthesis.context"!==e.toLowerCase())throw new Error("Only synthesis.context message property sets are currently supported for synthesizer");this.privInternalData.synthesisContext.setSection(t,i)}}sendMessageAsync(e,t,i,r){Object(S.b)(this.privInternalData.sendNetworkMessage(e,t),i,r)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach(e=>{"ConnectionEstablishedEvent"===e.name?this.connected&&this.connected(new J(e.connectionId)):"ConnectionClosedEvent"===e.name?this.disconnected&&this.disconnected(new J(e.connectionId)):"ConnectionMessageSentEvent"===e.name?this.messageSent&&this.messageSent(new Y(new V(e.message))):"ConnectionMessageReceivedEvent"===e.name&&this.messageReceived&&this.messageReceived(new Y(new V(e.message)))}),this.privServiceEventListener=this.privInternalData.serviceEvents.attach(e=>{this.receivedServiceMessage&&this.receivedServiceMessage(new $(e.jsonString,e.name))})}}var Z=i(44),X=i(45),ee=function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class te{constructor(e,t,i){this.audioConfig=void 0!==e?e:_.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=t.clone(),this.privConnectionFactory=i,this.implCommonRecognizerSetup()}close(e,t){o.a.throwIfDisposed(this.privDisposed),Object(S.b)(this.dispose(!0),e,t)}get internalData(){return this.privReco}dispose(e){return ee(this,void 0,void 0,(function*(){this.privDisposed||(this.privDisposed=!0,e&&this.privReco&&(yield this.privReco.audioSource.turnOff(),yield this.privReco.dispose()))}))}static get telemetryEnabled(){return H.a.telemetryDataEnabled}static enableTelemetry(e){H.a.telemetryDataEnabled=e}implCommonRecognizerSetup(){let e="undefined"!=typeof window?"Browser":"Node",t="unknown",i="unknown";"undefined"!=typeof navigator&&(e=e+"/"+navigator.platform,t=navigator.userAgent,i=navigator.appVersion);const r=this.createRecognizerConfig(new g.e(new g.a(new g.b(e,t,i))));this.privReco=this.createServiceRecognizer(te.getAuthFromProperties(this.privProperties),this.privConnectionFactory,this.audioConfig,r)}recognizeOnceAsyncImpl(e){return ee(this,void 0,void 0,(function*(){o.a.throwIfDisposed(this.privDisposed);const t=new S.a;yield this.implRecognizerStop(),yield this.privReco.recognize(e,t.resolve,t.reject);const i=yield t.promise;return yield this.implRecognizerStop(),i}))}startContinuousRecognitionAsyncImpl(e){return ee(this,void 0,void 0,(function*(){o.a.throwIfDisposed(this.privDisposed),yield this.implRecognizerStop(),yield this.privReco.recognize(e,void 0,void 0)}))}stopContinuousRecognitionAsyncImpl(){return ee(this,void 0,void 0,(function*(){o.a.throwIfDisposed(this.privDisposed),yield this.implRecognizerStop()}))}implRecognizerStop(){return ee(this,void 0,void 0,(function*(){this.privReco&&(yield this.privReco.stopRecognizing())}))}static getAuthFromProperties(e){const t=e.getProperty(a.a.SpeechServiceConnection_Key,void 0);return t&&""!==t?new Z.a(t):new X.a(t=>{const i=e.getProperty(a.a.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(i)},t=>{const i=e.getProperty(a.a.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(i)})}}var ie=function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class re extends te{constructor(e,t){const i=e;o.a.throwIfNull(i,"speechConfig"),super(t,i.properties,new q.a),this.privDisposedTranslationRecognizer=!1,void 0!==this.properties.getProperty(a.a.SpeechServiceConnection_TranslationVoice,void 0)&&o.a.throwIfNullOrWhitespace(this.properties.getProperty(a.a.SpeechServiceConnection_TranslationVoice),a.a[a.a.SpeechServiceConnection_TranslationVoice]),o.a.throwIfNullOrWhitespace(this.properties.getProperty(a.a.SpeechServiceConnection_TranslationToLanguages),a.a[a.a.SpeechServiceConnection_TranslationToLanguages]),o.a.throwIfNullOrWhitespace(this.properties.getProperty(a.a.SpeechServiceConnection_RecoLanguage),a.a[a.a.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return o.a.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(a.a.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return o.a.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(a.a.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return o.a.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(a.a.SpeechServiceConnection_TranslationVoice,void 0)}get authorizationToken(){return this.properties.getProperty(a.a.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.properties.setProperty(a.a.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}recognizeOnceAsync(e,t){o.a.throwIfDisposed(this.privDisposedTranslationRecognizer),Object(S.b)(this.recognizeOnceAsyncImpl(g.c.Conversation),e,t)}startContinuousRecognitionAsync(e,t){Object(S.b)(this.startContinuousRecognitionAsyncImpl(g.c.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){Object(S.b)(this.stopContinuousRecognitionAsyncImpl(),e,t)}removeTargetLanguage(e){if(o.a.throwIfNullOrUndefined(e,"language to be removed"),void 0!==this.properties.getProperty(a.a.SpeechServiceConnection_TranslationToLanguages,void 0)){const t=this.properties.getProperty(a.a.SpeechServiceConnection_TranslationToLanguages).split(","),i=t.indexOf(e);i>-1&&(t.splice(i,1),this.properties.setProperty(a.a.SpeechServiceConnection_TranslationToLanguages,t.join(",")),this.updateLanguages(t))}}addTargetLanguage(e){o.a.throwIfNullOrUndefined(e,"language to be added");let t=[];void 0!==this.properties.getProperty(a.a.SpeechServiceConnection_TranslationToLanguages,void 0)?(t=this.properties.getProperty(a.a.SpeechServiceConnection_TranslationToLanguages).split(","),t.includes(e)||(t.push(e),this.properties.setProperty(a.a.SpeechServiceConnection_TranslationToLanguages,t.join(",")))):(this.properties.setProperty(a.a.SpeechServiceConnection_TranslationToLanguages,e),t=[e]),this.updateLanguages(t)}close(e,t){o.a.throwIfDisposed(this.privDisposedTranslationRecognizer),Object(S.b)(this.dispose(!0),e,t)}onConnection(){}onDisconnection(){return ie(this,void 0,void 0,(function*(){}))}dispose(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return ie(this,void 0,void 0,(function*(){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,e&&(yield this.implRecognizerStop(),yield t.dispose.call(this,e)))}))}createRecognizerConfig(e){return new g.d(e,this.properties)}createServiceRecognizer(e,t,i,r){const n=i;return new K.a(e,t,n,r,this)}updateLanguages(e){const t=Q.fromRecognizer(this);t&&(t.setMessageProperty("speech.context","translationcontext",{to:e}),t.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:e})))}}var ne,se,oe=i(51),ae=i(52),ce=i(55),he=i(33),ue=i(28),pe=i(105),de=i(32);!function(e){e[e.Unknown=0]="Unknown",e[e.Female=1]="Female",e[e.Male=2]="Male"}(ne||(ne={})),function(e){e[e.OnlineNeural=1]="OnlineNeural",e[e.OnlineStandard=2]="OnlineStandard",e[e.OfflineNeural=3]="OfflineNeural",e[e.OfflineStandard=4]="OfflineStandard"}(se||(se={}));class ve{constructor(e){if(this.privStyleList=[],this.privVoicePath="",e&&(this.privName=e.Name,this.privLocale=e.Locale,this.privShortName=e.ShortName,this.privLocalName=e.LocalName,this.privVoiceType=e.VoiceType.endsWith("Standard")?se.OnlineStandard:se.OnlineNeural,this.privGender="Male"===e.Gender?ne.Male:"Female"===e.Gender?ne.Female:ne.Unknown,e.StyleList&&Array.isArray(e.StyleList)))for(const t of e.StyleList)this.privStyleList.push(t)}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get localName(){return this.privLocalName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get voicePath(){return this.privVoicePath}}class le extends pe.a{constructor(e,t){if(Array.isArray(t)){super(e,de.a.VoicesListRetrieved,void 0,new c.a),this.privVoices=[];for(const e of t)this.privVoices.push(new ve(e))}else super(e,de.a.Canceled,t.errorDetails?t.errorDetails:"Error information unavailable",new c.a)}get voices(){return this.privVoices}}var fe=function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class ge{constructor(e,t){const i=e;o.a.throwIfNull(i,"speechConfig"),null!==t&&(this.audioConfig=void 0===t?"undefined"==typeof window?void 0:_.fromDefaultSpeakerOutput():t),this.privProperties=i.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.privConnectionFactory=new oe.a,this.synthesisRequestQueue=new he.a,this.implCommonSynthesizeSetup()}get authorizationToken(){return this.properties.getProperty(a.a.SpeechServiceAuthorization_Token)}set authorizationToken(e){o.a.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(a.a.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(a.a.SpeechServiceConnection_AutoDetectSourceLanguages)===s.AutoDetectSourceLanguagesOpenRangeOptionName}static FromConfig(e,t,i){const r=e;return t.properties.mergeTo(r.properties),new ge(e,i)}buildSsml(e){const t={"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-JennyNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","km-KH":"km-KH-PisethNeural","ko-KR":"ko-KR-SunHiNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"};let i=this.properties.getProperty(a.a.SpeechServiceConnection_SynthLanguage,"en-US"),r=this.properties.getProperty(a.a.SpeechServiceConnection_SynthVoice,""),n=ge.XMLEncode(e);return this.autoDetectSourceLanguage?i="en-US":r=r||t[i],r&&(n=`<voice name='${r}'>${n}</voice>`),n=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${i}'>${n}</speak>`,n}speakTextAsync(e,t,i,r){this.speakImpl(e,!1,t,i,r)}speakSsmlAsync(e,t,i,r){this.speakImpl(e,!0,t,i,r)}getVoicesAsync(e=""){return fe(this,void 0,void 0,(function*(){return this.getVoices(e)}))}close(e,t){o.a.throwIfDisposed(this.privDisposed),Object(S.b)(this.dispose(!0),e,t)}get internalData(){return this.privAdapter}dispose(e){return fe(this,void 0,void 0,(function*(){this.privDisposed||(e&&this.privAdapter&&(yield this.privAdapter.dispose()),this.privDisposed=!0)}))}createSynthesizerConfig(e){return new ae.a(e,this.privProperties)}createSynthesisAdapter(e,t,i,r){return new O.a(e,t,r,this,this.audioConfig)}implCommonSynthesizeSetup(){let e="undefined"!=typeof window?"Browser":"Node",t="unknown",i="unknown";"undefined"!=typeof navigator&&(e=e+"/"+navigator.platform,t=navigator.userAgent,i=navigator.appVersion);const r=this.createSynthesizerConfig(new g.e(new g.a(new g.b(e,t,i)))),n=this.privProperties.getProperty(a.a.SpeechServiceConnection_Key,void 0),s=n&&""!==n?new Z.a(n):new X.a(e=>{const t=this.privProperties.getProperty(a.a.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(t)},e=>{const t=this.privProperties.getProperty(a.a.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(t)});this.privAdapter=this.createSynthesisAdapter(s,this.privConnectionFactory,this.audioConfig,r),this.privAdapter.audioOutputFormat=ue.a.fromSpeechSynthesisOutputFormat(h.a[this.properties.getProperty(a.a.SpeechServiceConnection_SynthOutputFormat,void 0)]),this.privRestAdapter=new ce.a(r)}speakImpl(e,t,i,r,n){try{o.a.throwIfDisposed(this.privDisposed);const s=Object(C.a)();let a;a=n instanceof x?new D.d(n):n instanceof D.a?n:void 0!==n?new L(n):void 0,this.synthesisRequestQueue.enqueue(new Se(s,e,t,e=>{if(this.privSynthesizing=!1,i)try{i(e)}catch(e){r&&r(e)}i=void 0,this.adapterSpeak().catch(()=>{})},e=>{r&&r(e)},a)),this.adapterSpeak().catch(()=>{})}catch(e){if(r)if(e instanceof Error){const t=e;r(t.name+": "+t.message)}else r(e);this.dispose(!0).catch(()=>{})}}getVoices(e){return fe(this,void 0,void 0,(function*(){const t=Object(C.a)(),i=yield this.privRestAdapter.getVoicesList(t);if(i.ok&&Array.isArray(i.json)){let r=i.json;return e&&e.length>0&&(r=r.filter(t=>!!t.Locale&&t.Locale.toLowerCase()===e.toLowerCase())),new le(t,r)}return new le(t,{errorDetails:`Error: ${i.status}: ${i.statusText}`})}))}adapterSpeak(){return fe(this,void 0,void 0,(function*(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;const e=yield this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(e.text,e.isSSML,e.requestId,e.cb,e.err,e.dataStream)}}))}static XMLEncode(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}}class Se{constructor(e,t,i,r,n,s){this.requestId=e,this.text=t,this.isSSML=i,this.cb=r,this.err=n,this.dataStream=s}}var me=void 0,ye=void 0;function we(e,t,i,r,n,s){var o=d.fromAuthorizationToken(i,r);o.speechRecognitionLanguage=n,o.addTargetLanguage(s);var a=_.fromDefaultMicrophoneInput();(me=new re(o,a)).recognizeOnceAsync((function(i){me.close(),me=void 0,e.invokeMethodAsync(t,i.privText)}),(function(e){console.log(e)}))}function Ce(e,t){null!=me&&me.close(),e.invokeMethodAsync(t,"")}function be(e,t,i,r,n,s,o){var a=d.fromAuthorizationToken(i,r);a.speechSynthesisLanguage=n,a.speechSynthesisVoiceName=s;var c=_.fromDefaultSpeakerOutput();(ye=new ge(a,c)).speakTextAsync(o,(function(i){i.reason===de.a.SynthesizingAudioCompleted?console.log("synthesis finished for ["+o+"]"):i.reason===SpeechSDK.ResultReason.Canceled&&console.log("synthesis failed. Error detail: "+i.errorDetails),console.log(i),ye.close(),ye=void 0,e.invokeMethodAsync(t,"Finished")}),(function(i){console.log(i),ye.close(),ye=void 0,e.invokeMethodAsync(t,"Error")}))}function Re(e,t){null!=ye&&(ye.close(),ye=void 0,e.invokeMethodAsync(t,"Close"))}},function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var r=i(69);class n extends r.a{constructor(e,t){super(t),this.privTargetChunkSize=e,this.privNextBufferReadyBytes=0}writeStreamChunk(e){if(e.isEnd||0===this.privNextBufferReadyBytes&&e.buffer.byteLength===this.privTargetChunkSize)return void super.writeStreamChunk(e);let t=0;for(;t<e.buffer.byteLength;){void 0===this.privNextBufferToWrite&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=e.timeReceived);const i=Math.min(e.buffer.byteLength-t,this.privTargetChunkSize-this.privNextBufferReadyBytes),r=new Uint8Array(this.privNextBufferToWrite),n=new Uint8Array(e.buffer.slice(t,i+t));r.set(n,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=i,t+=i,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){0===this.privNextBufferReadyBytes||this.isClosed||super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));class r{constructor(e){this.privSessionId=e}get sessionId(){return this.privSessionId}}},,,function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));class r{constructor(e,t,i,r){this.privResultId=e,this.privReason=t,this.privErrorDetails=i,this.privProperties=r}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}}},function(e,t,i){"use strict";i.d(t,"h",(function(){return n})),i.d(t,"g",(function(){return o})),i.d(t,"d",(function(){return a})),i.d(t,"a",(function(){return c})),i.d(t,"b",(function(){return h})),i.d(t,"c",(function(){return u})),i.d(t,"e",(function(){return p})),i.d(t,"f",(function(){return d}));var r=i(2);class n extends r.b{constructor(e,t,i=r.a.Info){super(e,i),this.privJsonResult=t}get jsonString(){return this.privJsonResult}}class s extends r.b{constructor(e,t,i=r.a.Info){super(e,i),this.privConnectionId=t}get connectionId(){return this.privConnectionId}}class o extends s{constructor(e,t,i){super("ConnectionStartEvent",e),this.privUri=t,this.privHeaders=i}get uri(){return this.privUri}get headers(){return this.privHeaders}}class a extends s{constructor(e,t){super("ConnectionEstablishedEvent",e)}}class c extends s{constructor(e,t,i){super("ConnectionClosedEvent",e,r.a.Debug),this.privReason=i,this.privStatusCode=t}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}class h extends s{constructor(e,t,i){super("ConnectionErrorEvent",e,r.a.Debug),this.privMessage=t,this.privType=i}get message(){return this.privMessage}get type(){return this.privType}}class u extends s{constructor(e,t,i){super("ConnectionEstablishErrorEvent",e,r.a.Error),this.privStatusCode=t,this.privReason=i}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}class p extends s{constructor(e,t,i){super("ConnectionMessageReceivedEvent",e),this.privNetworkReceivedTime=t,this.privMessage=i}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}}class d extends s{constructor(e,t,i){super("ConnectionMessageSentEvent",e),this.privNetworkSentTime=t,this.privMessage=i}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}}},function(e,t,i){"use strict";var r;i.d(t,"a",(function(){return r})),function(e){e[e.None=0]="None",e[e.Connected=1]="Connected",e[e.Connecting=2]="Connecting",e[e.Disconnected=3]="Disconnected"}(r||(r={}))},function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var r=i(2);class n extends r.b{constructor(e){super("BackgroundEvent",r.a.Error),this.privError=e}get error(){return this.privError}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var r=i(102);class n extends r.a{constructor(e,t){super(t),this.privOffset=e}get offset(){return this.privOffset}}}]);void 0===Speech&&console.error("esm-webpack-plugin: nothing exported!");const _Speech$speech_recognizeOnce=Speech.speech_recognizeOnce,_Speech$close_recognizer=Speech.close_recognizer,_Speech$speech_synthesizerOnce=Speech.speech_synthesizerOnce,_Speech$close_synthesizer=Speech.close_synthesizer;export{_Speech$speech_recognizeOnce as speech_recognizeOnce,_Speech$close_recognizer as close_recognizer,_Speech$speech_synthesizerOnce as speech_synthesizerOnce,_Speech$close_synthesizer as close_synthesizer};